


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.12">
    
    
      
        <title>The Sophia Language - æternity Documentation Hub</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.4dd2dd8d.min.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.6a5ad368.min.css">
      
      
        
        
        <meta name="theme-color" content="#e92063">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../../../site/assets/extra.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="pink" data-md-color-accent="white">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#the-sophia-language" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../../.." title="æternity Documentation Hub" class="md-header-nav__button md-logo" aria-label="æternity Documentation Hub">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            æternity Documentation Hub
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              The Sophia Language
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/aeternity/documentation-hub/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    aeternity/documentation-hub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="æternity Documentation Hub" class="md-nav__button md-logo" aria-label="æternity Documentation Hub">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    æternity Documentation Hub
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/aeternity/documentation-hub/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    aeternity/documentation-hub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../quick_glossary/" title="Quick Glossary" class="md-nav__link">
      Quick Glossary
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Node
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Node" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon"></span>
        Node
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../aeternity/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2">
    
    <label class="md-nav__link" for="nav-3-2">
      Get Started
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Get Started" data-md-level="2">
      <label class="md-nav__title" for="nav-3-2">
        <span class="md-nav__icon md-icon"></span>
        Get Started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../aeternity/docs/build-windows/" title="Build in Windows" class="md-nav__link">
      Build in Windows
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../aeternity/docs/build/" title="Build in Ubuntu" class="md-nav__link">
      Build in Ubuntu
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../aeternity/docs/configuration/" title="Configuration" class="md-nav__link">
      Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../aeternity/docs/cuda-miner/" title="CUDA Miner" class="md-nav__link">
      CUDA Miner
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../aeternity/docs/docker/" title="Docker" class="md-nav__link">
      Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../aeternity/docs/installation-windows/" title="Installation in Windows" class="md-nav__link">
      Installation in Windows
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../aeternity/docs/installation/" title="Installation in Ubuntu" class="md-nav__link">
      Installation in Ubuntu
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../aeternity/docs/operation/" title="Operation" class="md-nav__link">
      Operation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Protocol
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Protocol" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon"></span>
        Protocol
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../" title="æternity Protocol" class="md-nav__link">
      æternity Protocol
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../AENS/" title="AENS Naming System" class="md-nav__link">
      AENS Naming System
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../GOSSIP/" title="Gossip" class="md-nav__link">
      Gossip
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../STRATUM/" title="Stratum" class="md-nav__link">
      Stratum
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../SYNC/" title="Sync" class="md-nav__link">
      Sync
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../serializations/" title="Serializations" class="md-nav__link">
      Serializations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-7" type="checkbox" id="nav-4-7">
    
    <label class="md-nav__link" for="nav-4-7">
      Channels
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Channels" data-md-level="2">
      <label class="md-nav__title" for="nav-4-7">
        <span class="md-nav__icon md-icon"></span>
        Channels
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../channels/" title="State Channels" class="md-nav__link">
      State Channels
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../channels/OFF-CHAIN/" title="Off-chain" class="md-nav__link">
      Off-chain
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../channels/ON-CHAIN/" title="On-chain" class="md-nav__link">
      On-chain
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../channels/authentication/" title="Authentication" class="md-nav__link">
      Authentication
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../channels/state/" title="State" class="md-nav__link">
      State
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-8" type="checkbox" id="nav-4-8">
    
    <label class="md-nav__link" for="nav-4-8">
      Consensus
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Consensus" data-md-level="2">
      <label class="md-nav__title" for="nav-4-8">
        <span class="md-nav__icon md-icon"></span>
        Consensus
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../consensus/bitcoin-ng/" title="Bitcoin-NG" class="md-nav__link">
      Bitcoin-NG
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../consensus/coinbase/" title="Coinbase" class="md-nav__link">
      Coinbase
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../consensus/consensus/" title="Consensus" class="md-nav__link">
      Consensus
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../consensus/inflation.png" title="Inflation" class="md-nav__link">
      Inflation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../consensus/locking/" title="Locking" class="md-nav__link">
      Locking
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-9" type="checkbox" id="nav-4-9" checked>
    
    <label class="md-nav__link" for="nav-4-9">
      Contracts
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Contracts" data-md-level="2">
      <label class="md-nav__title" for="nav-4-9">
        <span class="md-nav__icon md-icon"></span>
        Contracts
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../aevm/" title="AEVM" class="md-nav__link">
      AEVM
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../contract_life_cycle/" title="Contract Life Cycle Examples" class="md-nav__link">
      Contract Life Cycle Examples
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../contract_state_tree/" title="Contract State Tree" class="md-nav__link">
      Contract State Tree
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../contract_transactions/" title="Contract Transactions" class="md-nav__link">
      Contract Transactions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../contract_vms/" title="Contract VMS" class="md-nav__link">
      Contract VMS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../contracts/" title="Contracts" class="md-nav__link">
      Contracts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../solidity/" title="The Solidity Language" class="md-nav__link">
      The Solidity Language
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        The Sophia Language
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" title="The Sophia Language" class="md-nav__link md-nav__link--active">
      The Sophia Language
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-sophia-language" class="md-nav__link">
    The Sophia Language
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    Table of Contents
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#language-features" class="md-nav__link">
    Language Features
  </a>
  
    <nav class="md-nav" aria-label="Language Features">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#contracts" class="md-nav__link">
    Contracts
  </a>
  
    <nav class="md-nav" aria-label="Contracts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#calling-other-contracts" class="md-nav__link">
    Calling other contracts
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mutable-state" class="md-nav__link">
    Mutable state
  </a>
  
    <nav class="md-nav" aria-label="Mutable state">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stateful-functions" class="md-nav__link">
    Stateful functions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#payable" class="md-nav__link">
    Payable
  </a>
  
    <nav class="md-nav" aria-label="Payable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#payable-contracts" class="md-nav__link">
    Payable contracts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#payable-entrypoints" class="md-nav__link">
    Payable entrypoints
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#namespaces" class="md-nav__link">
    Namespaces
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#splitting-code-over-multiple-files" class="md-nav__link">
    Splitting code over multiple files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#types" class="md-nav__link">
    Types
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#literals" class="md-nav__link">
    Literals
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arithmetic" class="md-nav__link">
    Arithmetic
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bit-fields" class="md-nav__link">
    Bit fields
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#type-aliases" class="md-nav__link">
    Type aliases
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#algebraic-data-types" class="md-nav__link">
    Algebraic data types
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lists" class="md-nav__link">
    Lists
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#maps-and-records" class="md-nav__link">
    Maps and records
  </a>
  
    <nav class="md-nav" aria-label="Maps and records">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#constructing-maps-and-records" class="md-nav__link">
    Constructing maps and records
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accessing-values" class="md-nav__link">
    Accessing values
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updating-a-value" class="md-nav__link">
    Updating a value
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#builtin-functions-on-maps" class="md-nav__link">
    Builtin functions on maps
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#map-implementation" class="md-nav__link">
    Map implementation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strings" class="md-nav__link">
    Strings
  </a>
  
    <nav class="md-nav" aria-label="Strings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#builtin-functions-on-strings" class="md-nav__link">
    Builtin functions on strings
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#byte-arrays" class="md-nav__link">
    Byte arrays
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#builtin-functions-on-integers" class="md-nav__link">
    Builtin functions on integers
  </a>
  
    <nav class="md-nav" aria-label="Builtin functions on integers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#builtin-functions-on-addresses" class="md-nav__link">
    Builtin functions on addresses
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#builtins" class="md-nav__link">
    Builtins
  </a>
  
    <nav class="md-nav" aria-label="Builtins">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cryptographic-primitives" class="md-nav__link">
    Cryptographic primitives
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#authorization-interface" class="md-nav__link">
    Authorization interface
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#account-interface" class="md-nav__link">
    Account interface
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oracle-interface" class="md-nav__link">
    Oracle interface
  </a>
  
    <nav class="md-nav" aria-label="Oracle interface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#oracle-register" class="md-nav__link">
    Oracle register
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oracle-extend" class="md-nav__link">
    Oracle extend
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oracle-get_question" class="md-nav__link">
    Oracle get_question
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oracle-respond" class="md-nav__link">
    Oracle respond
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oracle-query" class="md-nav__link">
    Oracle query
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oracle-query_fee" class="md-nav__link">
    Oracle query_fee
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oracle-get_answer" class="md-nav__link">
    Oracle get_answer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oracle-check" class="md-nav__link">
    Oracle check
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oracle-check_query" class="md-nav__link">
    Oracle check_query
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aens-interface" class="md-nav__link">
    AENS interface
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#events" class="md-nav__link">
    Events
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#contract-primitives" class="md-nav__link">
    Contract primitives
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compiler-pragmas" class="md-nav__link">
    Compiler pragmas
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#standard-library" class="md-nav__link">
    Standard library
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exceptions" class="md-nav__link">
    Exceptions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#syntax" class="md-nav__link">
    Syntax
  </a>
  
    <nav class="md-nav" aria-label="Syntax">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lexical-syntax" class="md-nav__link">
    Lexical syntax
  </a>
  
    <nav class="md-nav" aria-label="Lexical syntax">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comments" class="md-nav__link">
    Comments
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keywords" class="md-nav__link">
    Keywords
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tokens" class="md-nav__link">
    Tokens
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#layout-blocks" class="md-nav__link">
    Layout blocks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notation" class="md-nav__link">
    Notation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#declarations" class="md-nav__link">
    Declarations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#types_1" class="md-nav__link">
    Types
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#statements" class="md-nav__link">
    Statements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#expressions" class="md-nav__link">
    Expressions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operators-types" class="md-nav__link">
    Operators types
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operator-precendences" class="md-nav__link">
    Operator precendences
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    Examples
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-lifetime-of-a-contract" class="md-nav__link">
    The lifetime of a contract
  </a>
  
    <nav class="md-nav" aria-label="The lifetime of a contract">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#killing-a-contract" class="md-nav__link">
    Killing a contract
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-sophia_01-abi" class="md-nav__link">
    The Sophia_01 ABI
  </a>
  
    <nav class="md-nav" aria-label="The Sophia_01 ABI">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#byte-code" class="md-nav__link">
    Byte code
  </a>
  
    <nav class="md-nav" aria-label="Byte code">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#meta-data" class="md-nav__link">
    Meta data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#type-information" class="md-nav__link">
    Type information
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-layout" class="md-nav__link">
    Memory layout
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encoding-sophia-values-as-binaries" class="md-nav__link">
    Encoding Sophia values as binaries
  </a>
  
    <nav class="md-nav" aria-label="Encoding Sophia values as binaries">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#binary-encoding-of-sophia-maps" class="md-nav__link">
    Binary encoding of Sophia maps
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initialization" class="md-nav__link">
    Initialization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#return" class="md-nav__link">
    Return
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#storing-the-contract-state" class="md-nav__link">
    Storing the contract state
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remote-contract-calls" class="md-nav__link">
    Remote contract calls
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delegation-signature" class="md-nav__link">
    Delegation signature
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sophia_explained/" title="Sophia Explained" class="md-nav__link">
      Sophia Explained
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sophia_stdlib/" title="Standard Library" class="md-nav__link">
      Standard Library
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../varna/" title="The Varna Language" class="md-nav__link">
      The Varna Language
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-10" type="checkbox" id="nav-4-10">
    
    <label class="md-nav__link" for="nav-4-10">
      Generalized Accounts
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Generalized Accounts" data-md-level="2">
      <label class="md-nav__title" for="nav-4-10">
        <span class="md-nav__icon md-icon"></span>
        Generalized Accounts
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../generalized_accounts/ga_explained/" title="Generalized Accounts" class="md-nav__link">
      Generalized Accounts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../generalized_accounts/generalized_accounts/" title="Generic Accounts" class="md-nav__link">
      Generic Accounts
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-11" type="checkbox" id="nav-4-11">
    
    <label class="md-nav__link" for="nav-4-11">
      Node
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Node" data-md-level="2">
      <label class="md-nav__title" for="nav-4-11">
        <span class="md-nav__icon md-icon"></span>
        Node
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-11-1" type="checkbox" id="nav-4-11-1">
    
    <label class="md-nav__link" for="nav-4-11-1">
      API
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="API" data-md-level="3">
      <label class="md-nav__title" for="nav-4-11-1">
        <span class="md-nav__icon md-icon"></span>
        API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/account_api_usage/" title="Account API Usage" class="md-nav__link">
      Account API Usage
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/api_encoding/" title="API Encoding" class="md-nav__link">
      API Encoding
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/channel_ws_api/" title="State Channel WebSocket API" class="md-nav__link">
      State Channel WebSocket API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/channels_api_usage/" title="Channels API Usage" class="md-nav__link">
      Channels API Usage
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/contract_api_usage/" title="Contract API Usage" class="md-nav__link">
      Contract API Usage
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/mining_api_usage/" title="Mining API Usage" class="md-nav__link">
      Mining API Usage
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/naming_system_api_usage/" title="Naming System API Usage" class="md-nav__link">
      Naming System API Usage
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/oracle_api_usage/" title="Oracle API Usage" class="md-nav__link">
      Oracle API Usage
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/spend_api_usage/" title="Spend API Usage" class="md-nav__link">
      Spend API Usage
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-11-1-10" type="checkbox" id="nav-4-11-1-10">
    
    <label class="md-nav__link" for="nav-4-11-1-10">
      Examples
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Examples" data-md-level="4">
      <label class="md-nav__title" for="nav-4-11-1-10">
        <span class="md-nav__icon md-icon"></span>
        Examples
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-11-1-10-1" type="checkbox" id="nav-4-11-1-10-1">
    
    <label class="md-nav__link" for="nav-4-11-1-10-1">
      State Channels
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="State Channels" data-md-level="5">
      <label class="md-nav__title" for="nav-4-11-1-10-1">
        <span class="md-nav__icon md-icon"></span>
        State Channels
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/" title="WebSocket API Examples" class="md-nav__link">
      WebSocket API Examples
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-11-1-10-1-2" type="checkbox" id="nav-4-11-1-10-1-2">
    
    <label class="md-nav__link" for="nav-4-11-1-10-1-2">
      JSON-RPS
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="JSON-RPS" data-md-level="6">
      <label class="md-nav__title" for="nav-4-11-1-10-1-2">
        <span class="md-nav__icon md-icon"></span>
        JSON-RPS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-11-1-10-1-2-1" type="checkbox" id="nav-4-11-1-10-1-2-1">
    
    <label class="md-nav__link" for="nav-4-11-1-10-1-2-1">
      Abort Updates
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Abort Updates" data-md-level="7">
      <label class="md-nav__title" for="nav-4-11-1-10-1-2-1">
        <span class="md-nav__icon md-icon"></span>
        Abort Updates
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/abort_updates/sc_ws_abort_deposit/" title="abort_deposit" class="md-nav__link">
      abort_deposit
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/abort_updates/sc_ws_abort_offchain_update/" title="abort_offchain_update" class="md-nav__link">
      abort_offchain_update
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/abort_updates/sc_ws_abort_settle/" title="abort_settle" class="md-nav__link">
      abort_settle
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/abort_updates/sc_ws_abort_shutdown/" title="abort_shutdown" class="md-nav__link">
      abort_shutdown
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/abort_updates/sc_ws_abort_slash/" title="abort_slash" class="md-nav__link">
      abort_slash
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/abort_updates/sc_ws_abort_snapshot_solo/" title="abort_snapshot_solo" class="md-nav__link">
      abort_snapshot_solo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/abort_updates/sc_ws_abort_withdraw/" title="abort_withdraw" class="md-nav__link">
      abort_withdraw
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/abort_updates/sc_ws_can_not_abort_while_open/" title="can_not_abort_while_open" class="md-nav__link">
      can_not_abort_while_open
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-11-1-10-1-2-2" type="checkbox" id="nav-4-11-1-10-1-2-2">
    
    <label class="md-nav__link" for="nav-4-11-1-10-1-2-2">
      Changeable Fee
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Changeable Fee" data-md-level="7">
      <label class="md-nav__title" for="nav-4-11-1-10-1-2-2">
        <span class="md-nav__icon md-icon"></span>
        Changeable Fee
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/changeable_fee/sc_ws_set_fee_close_mutual/" title="set_fee_close_mutual" class="md-nav__link">
      set_fee_close_mutual
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/changeable_fee/sc_ws_set_fee_close_solo/" title="set_fee_close_solo" class="md-nav__link">
      set_fee_close_solo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/changeable_fee/sc_ws_set_fee_create/" title="set_fee_create" class="md-nav__link">
      set_fee_create
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/changeable_fee/sc_ws_set_fee_deposit/" title="set_fee_deposit" class="md-nav__link">
      set_fee_deposit
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/changeable_fee/sc_ws_set_fee_settle/" title="set_fee_settle" class="md-nav__link">
      set_fee_settle
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/changeable_fee/sc_ws_set_fee_slash/" title="set_fee_slash" class="md-nav__link">
      set_fee_slash
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/changeable_fee/sc_ws_set_fee_snapshot/" title="set_fee_snapshot" class="md-nav__link">
      set_fee_snapshot
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/changeable_fee/sc_ws_set_fee_withdrawl.md" title="set_fee_withdrawl" class="md-nav__link">
      set_fee_withdrawl
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-11-1-10-1-2-3" type="checkbox" id="nav-4-11-1-10-1-2-3">
    
    <label class="md-nav__link" for="nav-4-11-1-10-1-2-3">
      Continious
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Continious" data-md-level="7">
      <label class="md-nav__title" for="nav-4-11-1-10-1-2-3">
        <span class="md-nav__icon md-icon"></span>
        Continious
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/continuous/init_per_group/" title="init_per_group" class="md-nav__link">
      init_per_group
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/continuous/sc_ws_deposit/" title="deposit" class="md-nav__link">
      deposit
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/continuous/sc_ws_failed_update/" title="failed_update" class="md-nav__link">
      failed_update
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/continuous/sc_ws_generic_messages/" title="generic_messages" class="md-nav__link">
      generic_messages
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/continuous/sc_ws_ping_pong/" title="ping_pong" class="md-nav__link">
      ping_pong
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/continuous/sc_ws_update_conflict/" title="update_conflict" class="md-nav__link">
      update_conflict
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/continuous/sc_ws_withdraw/" title="withdraw" class="md-nav__link">
      withdraw
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-11-1-10-1-2-4" type="checkbox" id="nav-4-11-1-10-1-2-4">
    
    <label class="md-nav__link" for="nav-4-11-1-10-1-2-4">
      Contracts
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Contracts" data-md-level="7">
      <label class="md-nav__title" for="nav-4-11-1-10-1-2-4">
        <span class="md-nav__icon md-icon"></span>
        Contracts
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/contracts/init_per_group/" title="init_per_group" class="md-nav__link">
      init_per_group
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/contracts/sc_ws_environment_contract/" title="environment_contract" class="md-nav__link">
      environment_contract
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/contracts/sc_ws_nameservice_contract/" title="nameservice_contract" class="md-nav__link">
      nameservice_contract
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/contracts/sc_ws_oracle_contract/" title="oracle_contract" class="md-nav__link">
      oracle_contract
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/contracts/sc_ws_remote_call_contract/" title="remote_call_contract" class="md-nav__link">
      remote_call_contract
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/contracts/sc_ws_remote_call_contract_refering_onchain_data/" title="remote_call_contract_refering_onchain_data" class="md-nav__link">
      remote_call_contract_refering_onchain_data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/contracts/sc_ws_wrong_call_data/" title="wrong_call_data" class="md-nav__link">
      wrong_call_data
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-11-1-10-1-2-5" type="checkbox" id="nav-4-11-1-10-1-2-5">
    
    <label class="md-nav__link" for="nav-4-11-1-10-1-2-5">
      Generalized Accounts
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Generalized Accounts" data-md-level="7">
      <label class="md-nav__title" for="nav-4-11-1-10-1-2-5">
        <span class="md-nav__icon md-icon"></span>
        Generalized Accounts
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-11-1-10-1-2-5-1" type="checkbox" id="nav-4-11-1-10-1-2-5-1">
    
    <label class="md-nav__link" for="nav-4-11-1-10-1-2-5-1">
      both
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="both" data-md-level="8">
      <label class="md-nav__title" for="nav-4-11-1-10-1-2-5-1">
        <span class="md-nav__icon md-icon"></span>
        both
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/generalized_accounts/both/basic_open_close.md" title="basic_open_close" class="md-nav__link">
      basic_open_close
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-11-1-10-1-2-5-2" type="checkbox" id="nav-4-11-1-10-1-2-5-2">
    
    <label class="md-nav__link" for="nav-4-11-1-10-1-2-5-2">
      initiator
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="initiator" data-md-level="8">
      <label class="md-nav__title" for="nav-4-11-1-10-1-2-5-2">
        <span class="md-nav__icon md-icon"></span>
        initiator
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/generalized_accounts/initiator/basic_open_close.md" title="basic_open_close" class="md-nav__link">
      basic_open_close
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-11-1-10-1-2-5-3" type="checkbox" id="nav-4-11-1-10-1-2-5-3">
    
    <label class="md-nav__link" for="nav-4-11-1-10-1-2-5-3">
      responder
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="responder" data-md-level="8">
      <label class="md-nav__title" for="nav-4-11-1-10-1-2-5-3">
        <span class="md-nav__icon md-icon"></span>
        responder
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/generalized_accounts/responder/basic_open_close.md" title="basic_open_close" class="md-nav__link">
      basic_open_close
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-11-1-10-1-2-6" type="checkbox" id="nav-4-11-1-10-1-2-6">
    
    <label class="md-nav__link" for="nav-4-11-1-10-1-2-6">
      Reconnect
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Reconnect" data-md-level="7">
      <label class="md-nav__title" for="nav-4-11-1-10-1-2-6">
        <span class="md-nav__icon md-icon"></span>
        Reconnect
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/reconnect/basic_client_reconnect_i.md" title="basic_client_reconnect_i" class="md-nav__link">
      basic_client_reconnect_i
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/reconnect/basic_client_reconnect_i_w_reestablish.md" title="basic_client_reconnect_i_w_reestablish" class="md-nav__link">
      basic_client_reconnect_i_w_reestablish
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/reconnect/basic_client_reconnect_r.md" title="basic_client_reconnect_r" class="md-nav__link">
      basic_client_reconnect_r
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-11-1-10-1-2-7" type="checkbox" id="nav-4-11-1-10-1-2-7">
    
    <label class="md-nav__link" for="nav-4-11-1-10-1-2-7">
      With Meta
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="With Meta" data-md-level="7">
      <label class="md-nav__title" for="nav-4-11-1-10-1-2-7">
        <span class="md-nav__icon md-icon"></span>
        With Meta
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/with_meta/init_per_group/" title="init_per_group" class="md-nav__link">
      init_per_group
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/with_meta/sc_ws_deposit/" title="deposit" class="md-nav__link">
      deposit
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/with_meta/sc_ws_remote_call_contract/" title="remote_call_contract" class="md-nav__link">
      remote_call_contract
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/with_meta/sc_ws_withdraw/" title="withdraw" class="md-nav__link">
      withdraw
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/sc_ws_basic_open_close_server/" title="basic_open_close" class="md-nav__link">
      basic_open_close
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/sc_ws_basic_open_close/" title="basic_open_close_server" class="md-nav__link">
      basic_open_close_server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/sc_ws_broken_open_params/" title="broken_open_params" class="md-nav__link">
      broken_open_params
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/sc_ws_set_fee_close_mutual.md" title="close_mutual" class="md-nav__link">
      close_mutual
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/sc_ws_close_mutual/" title="close_solo" class="md-nav__link">
      close_solo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/sc_ws_leave_reconnect/" title="leave_reconnect" class="md-nav__link">
      leave_reconnect
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/sc_ws_leave_reestablish/" title="leave_reestablish" class="md-nav__link">
      leave_reestablish
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/sc_ws_leave_reestablish_responder_stays/" title="leave_reestablish_responder_stays" class="md-nav__link">
      leave_reestablish_responder_stays
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/sc_ws_leave_reestablish_wrong_fsm_id/" title="leave_reestablish_wrong_fsm_id" class="md-nav__link">
      leave_reestablish_wrong_fsm_id
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/min_depth_is_modifiable.md" title="min_depth_is_modifiable" class="md-nav__link">
      min_depth_is_modifiable
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/min_depth_not_reached_timeout.md" title="min_depth_not_reached_timeout" class="md-nav__link">
      min_depth_not_reached_timeout
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/opening_ping_pong.md" title="opening_ping_pong" class="md-nav__link">
      opening_ping_pong
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/slash.md" title="slash" class="md-nav__link">
      slash
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/snapshot_solo.md" title="snapshot_solo" class="md-nav__link">
      snapshot_solo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/timeout_open.md" title="timeout_open" class="md-nav__link">
      timeout_open
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/examples/channels/json-rpc/update_with_meta.md" title="update_with_meta" class="md-nav__link">
      update_with_meta
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-12" type="checkbox" id="nav-4-12">
    
    <label class="md-nav__link" for="nav-4-12">
      Oracles
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Oracles" data-md-level="2">
      <label class="md-nav__title" for="nav-4-12">
        <span class="md-nav__icon md-icon"></span>
        Oracles
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../oracles/oracles/" title="Oracles" class="md-nav__link">
      Oracles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../oracles/oracle_life_cycle/" title="Oracle Life Cycle Examples" class="md-nav__link">
      Oracle Life Cycle Examples
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../oracles/oracle_state_tree/" title="Oracle State Tree" class="md-nav__link">
      Oracle State Tree
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../oracles/oracle_transactions.md." title="Oracle Transactions" class="md-nav__link">
      Oracle Transactions
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Aetmodel
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Aetmodel" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon"></span>
        Aetmodel
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../aetmodel/ThreatModel/" title="Threat Model" class="md-nav__link">
      Threat Model
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      AEXs
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="AEXs" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon"></span>
        AEXs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../AEXs/AEXS/aex-1/" title="AEX1" class="md-nav__link">
      AEX1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../AEXs/AEXS/aex-2/" title="AEX2" class="md-nav__link">
      AEX2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../AEXs/AEXS/aex-3/" title="AEX3" class="md-nav__link">
      AEX3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../AEXs/AEXS/aex-4/" title="AEX4" class="md-nav__link">
      AEX4
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../AEXs/AEXS/aex-5/" title="AEX5" class="md-nav__link">
      AEX5
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../AEXs/AEXS/aex-7/" title="AEX7" class="md-nav__link">
      AEX7
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../AEXs/AEXS/aex-9/" title="AEX9" class="md-nav__link">
      AEX9
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../AEXs/AEXS/aex-10/" title="AEX10" class="md-nav__link">
      AEX10
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../AEXs/AEXS/aex-draft_data_serialization/" title="AEX-Draft" class="md-nav__link">
      AEX-Draft
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Node Usage API
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Node Usage API" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        <span class="md-nav__icon md-icon"></span>
        Node Usage API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7-1" type="checkbox" id="nav-7-1">
    
    <label class="md-nav__link" for="nav-7-1">
      Latest Stable Release
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Latest Stable Release" data-md-level="2">
      <label class="md-nav__title" for="nav-7-1">
        <span class="md-nav__icon md-icon"></span>
        Latest Stable Release
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api-docs/README.md" title="Autogenerated æternity Node API Documentation" class="md-nav__link">
      Autogenerated æternity Node API Documentation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/api_encoding/" title="Encoding Scheme" class="md-nav__link">
      Encoding Scheme
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/account_api_usage/" title="Account Managment" class="md-nav__link">
      Account Managment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/spend_api_usage/" title="Spending Tokens" class="md-nav__link">
      Spending Tokens
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/oracle_api_usage/" title="Oracle" class="md-nav__link">
      Oracle
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/naming_system_api_usage/" title="Naming System" class="md-nav__link">
      Naming System
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/contract_api_usage/" title="Contract" class="md-nav__link">
      Contract
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/channels_api_usage/" title="Channels" class="md-nav__link">
      Channels
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../node/api/mining_api_usage/" title="Mining" class="md-nav__link">
      Mining
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Developer Tools
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Developer Tools" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        <span class="md-nav__icon md-icon"></span>
        Developer Tools
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8-1" type="checkbox" id="nav-8-1">
    
    <label class="md-nav__link" for="nav-8-1">
      æternity Framework
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="æternity Framework" data-md-level="2">
      <label class="md-nav__title" for="nav-8-1">
        <span class="md-nav__icon md-icon"></span>
        æternity Framework
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/%C3%A6ternity-frameworks/aepp-aeproject-js/" title="AEproject" class="md-nav__link">
      AEproject
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8-2" type="checkbox" id="nav-8-2">
    
    <label class="md-nav__link" for="nav-8-2">
      Software Development Kits
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Software Development Kits" data-md-level="2">
      <label class="md-nav__title" for="nav-8-2">
        <span class="md-nav__icon md-icon"></span>
        Software Development Kits
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8-2-1" type="checkbox" id="nav-8-2-1">
    
    <label class="md-nav__link" for="nav-8-2-1">
      JavaScript
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="JavaScript" data-md-level="3">
      <label class="md-nav__title" for="nav-8-2-1">
        <span class="md-nav__icon md-icon"></span>
        JavaScript
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/contrib/README.md" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/CHANGELOG/" title="CHANGELOG" class="md-nav__link">
      CHANGELOG
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8-2-1-4" type="checkbox" id="nav-8-2-1-4">
    
    <label class="md-nav__link" for="nav-8-2-1-4">
      API
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="API" data-md-level="4">
      <label class="md-nav__title" for="nav-8-2-1-4">
        <span class="md-nav__icon md-icon"></span>
        API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8-2-1-4-1" type="checkbox" id="nav-8-2-1-4-1">
    
    <label class="md-nav__link" for="nav-8-2-1-4-1">
      Account
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Account" data-md-level="5">
      <label class="md-nav__title" for="nav-8-2-1-4-1">
        <span class="md-nav__icon md-icon"></span>
        Account
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/account/memory/" title="Memory" class="md-nav__link">
      Memory
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/account/selector/" title="Selector" class="md-nav__link">
      Selector
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8-2-1-4-2" type="checkbox" id="nav-8-2-1-4-2">
    
    <label class="md-nav__link" for="nav-8-2-1-4-2">
      AE
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="AE" data-md-level="5">
      <label class="md-nav__title" for="nav-8-2-1-4-2">
        <span class="md-nav__icon md-icon"></span>
        AE
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/ae/aens/" title="AENS" class="md-nav__link">
      AENS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/ae/aepp/" title="æpp" class="md-nav__link">
      æpp
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/ae/contract/" title="Contract" class="md-nav__link">
      Contract
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/ae/oracle/" title="Oracle" class="md-nav__link">
      Oracle
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/ae/universal/" title="Universal" class="md-nav__link">
      Universal
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/ae/wallet/" title="Wallet" class="md-nav__link">
      Wallet
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8-2-1-4-3" type="checkbox" id="nav-8-2-1-4-3">
    
    <label class="md-nav__link" for="nav-8-2-1-4-3">
      Chain
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Chain" data-md-level="5">
      <label class="md-nav__title" for="nav-8-2-1-4-3">
        <span class="md-nav__icon md-icon"></span>
        Chain
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/chain/node/" title="Node" class="md-nav__link">
      Node
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8-2-1-4-4" type="checkbox" id="nav-8-2-1-4-4">
    
    <label class="md-nav__link" for="nav-8-2-1-4-4">
      Channel
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Channel" data-md-level="5">
      <label class="md-nav__title" for="nav-8-2-1-4-4">
        <span class="md-nav__icon md-icon"></span>
        Channel
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/channel/" title="Channel" class="md-nav__link">
      Channel
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8-2-1-4-5" type="checkbox" id="nav-8-2-1-4-5">
    
    <label class="md-nav__link" for="nav-8-2-1-4-5">
      Contract
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Contract" data-md-level="5">
      <label class="md-nav__title" for="nav-8-2-1-4-5">
        <span class="md-nav__icon md-icon"></span>
        Contract
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/contract/aci/" title="ACI" class="md-nav__link">
      ACI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/contract/compiler/" title="Compiler" class="md-nav__link">
      Compiler
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/contract/ga/" title="Generalized Account" class="md-nav__link">
      Generalized Account
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8-2-1-4-6" type="checkbox" id="nav-8-2-1-4-6">
    
    <label class="md-nav__link" for="nav-8-2-1-4-6">
      Oracle
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Oracle" data-md-level="5">
      <label class="md-nav__title" for="nav-8-2-1-4-6">
        <span class="md-nav__icon md-icon"></span>
        Oracle
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/oracle/node/" title="Node" class="md-nav__link">
      Node
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8-2-1-4-7" type="checkbox" id="nav-8-2-1-4-7">
    
    <label class="md-nav__link" for="nav-8-2-1-4-7">
      RPC
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="RPC" data-md-level="5">
      <label class="md-nav__title" for="nav-8-2-1-4-7">
        <span class="md-nav__icon md-icon"></span>
        RPC
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/rpc/client/" title="Client" class="md-nav__link">
      Client
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8-2-1-4-8" type="checkbox" id="nav-8-2-1-4-8">
    
    <label class="md-nav__link" for="nav-8-2-1-4-8">
      Transcation
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Transcation" data-md-level="5">
      <label class="md-nav__title" for="nav-8-2-1-4-8">
        <span class="md-nav__icon md-icon"></span>
        Transcation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8-2-1-4-8-1" type="checkbox" id="nav-8-2-1-4-8-1">
    
    <label class="md-nav__link" for="nav-8-2-1-4-8-1">
      Helper for Builder
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Helper for Builder" data-md-level="6">
      <label class="md-nav__title" for="nav-8-2-1-4-8-1">
        <span class="md-nav__icon md-icon"></span>
        Helper for Builder
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/tx/builder/helpers/" title="Helpers" class="md-nav__link">
      Helpers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/tx/builder/schema/" title="Schema" class="md-nav__link">
      Schema
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/tx/builder/" title="Builder" class="md-nav__link">
      Builder
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/tx/tx/" title="Transaction" class="md-nav__link">
      Transaction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/tx/validator/" title="Validator" class="md-nav__link">
      Validator
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8-2-1-4-9" type="checkbox" id="nav-8-2-1-4-9">
    
    <label class="md-nav__link" for="nav-8-2-1-4-9">
      Utils
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Utils" data-md-level="5">
      <label class="md-nav__title" for="nav-8-2-1-4-9">
        <span class="md-nav__icon md-icon"></span>
        Utils
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8-2-1-4-9-1" type="checkbox" id="nav-8-2-1-4-9-1">
    
    <label class="md-nav__link" for="nav-8-2-1-4-9-1">
      Wallet Communication
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Wallet Communication" data-md-level="6">
      <label class="md-nav__title" for="nav-8-2-1-4-9-1">
        <span class="md-nav__icon md-icon"></span>
        Wallet Communication
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8-2-1-4-9-1-1" type="checkbox" id="nav-8-2-1-4-9-1-1">
    
    <label class="md-nav__link" for="nav-8-2-1-4-9-1-1">
      Connection
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Connection" data-md-level="7">
      <label class="md-nav__title" for="nav-8-2-1-4-9-1-1">
        <span class="md-nav__icon md-icon"></span>
        Connection
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/utils/aepp-wallet-communication/connection/browser-runtime/" title="Browser-Runtime" class="md-nav__link">
      Browser-Runtime
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/utils/aepp-wallet-communication/connection/browser-window-message/" title="Browser-Window-Message" class="md-nav__link">
      Browser-Window-Message
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8-2-1-4-9-1-2" type="checkbox" id="nav-8-2-1-4-9-1-2">
    
    <label class="md-nav__link" for="nav-8-2-1-4-9-1-2">
      RPC
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="RPC" data-md-level="7">
      <label class="md-nav__title" for="nav-8-2-1-4-9-1-2">
        <span class="md-nav__icon md-icon"></span>
        RPC
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/utils/aepp-wallet-communication/rpc/aepp-rpc/" title="æpp" class="md-nav__link">
      æpp
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/utils/aepp-wallet-communication/rpc/rpc-client/" title="Client" class="md-nav__link">
      Client
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/utils/aepp-wallet-communication/rpc/wallet-rpc/" title="Wallet" class="md-nav__link">
      Wallet
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/utils/aepp-wallet-communication/connection/" title="Connection" class="md-nav__link">
      Connection
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/utils/aepp-wallet-communication/content-script-bridge/" title="Content Script Bridge" class="md-nav__link">
      Content Script Bridge
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/utils/aepp-wallet-communication/wallet-detector/" title="Wallet Detector" class="md-nav__link">
      Wallet Detector
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/utils/bytes/" title="Bytes" class="md-nav__link">
      Bytes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/utils/crypto/" title="Crypto" class="md-nav__link">
      Crypto
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/utils/keystore/" title="Keystore" class="md-nav__link">
      Keystore
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/utils/swagger/" title="Swagger" class="md-nav__link">
      Swagger
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/account/" title="Account" class="md-nav__link">
      Account
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/accounts/" title="Accounts" class="md-nav__link">
      Accounts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/ae/" title="AE" class="md-nav__link">
      AE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/chain/" title="Chain" class="md-nav__link">
      Chain
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/contract/" title="Contract" class="md-nav__link">
      Contract
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/node-pool/" title="Node Pool" class="md-nav__link">
      Node Pool
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/node/" title="Node" class="md-nav__link">
      Node
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/oracle/" title="Oracle" class="md-nav__link">
      Oracle
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-js/docs/api/tx/" title="Transaction (Tx)" class="md-nav__link">
      Transaction (Tx)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-go/" title="Go" class="md-nav__link">
      Go
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-python/" title="Python" class="md-nav__link">
      Python
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-elixir/" title="Elixir" class="md-nav__link">
      Elixir
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8-2-5" type="checkbox" id="nav-8-2-5">
    
    <label class="md-nav__link" for="nav-8-2-5">
      Java
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Java" data-md-level="3">
      <label class="md-nav__title" for="nav-8-2-5">
        <span class="md-nav__icon md-icon"></span>
        Java
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-java/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-java/CONTRIBUTING/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-java/docs/changelog/" title="CHANGELOG" class="md-nav__link">
      CHANGELOG
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/aepp-sdk-net/" title=".NET" class="md-nav__link">
      .NET
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/sdks/capability_matrix/" title="Capability Matrix" class="md-nav__link">
      Capability Matrix
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/aepp-middleware/" title="Middleware" class="md-nav__link">
      Middleware
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/aepp-faucet/" title="Token Faucet" class="md-nav__link">
      Token Faucet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8-5" type="checkbox" id="nav-8-5">
    
    <label class="md-nav__link" for="nav-8-5">
      Frameworks
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Frameworks" data-md-level="2">
      <label class="md-nav__title" for="nav-8-5">
        <span class="md-nav__icon md-icon"></span>
        Frameworks
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/frameworks/aepp-components/" title="æpp Components" class="md-nav__link">
      æpp Components
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/aepp-contracts/" title="Contract Editor" class="md-nav__link">
      Contract Editor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8-7" type="checkbox" id="nav-8-7">
    
    <label class="md-nav__link" for="nav-8-7">
      AirGap
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="AirGap" data-md-level="2">
      <label class="md-nav__title" for="nav-8-7">
        <span class="md-nav__icon md-icon"></span>
        AirGap
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/airgap/airgap-coin-lib/docs/" title="AirGap Coin Library" class="md-nav__link">
      AirGap Coin Library
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/airgap/airgap-vault/" title="AirGap Vault" class="md-nav__link">
      AirGap Vault
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developer-tools/airgap/airgap-wallet/" title="AirGap Wallet" class="md-nav__link">
      AirGap Wallet
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Sophia Compiler
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Sophia Compiler" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        <span class="md-nav__icon md-icon"></span>
        Sophia Compiler
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../aesophia/" title="aesophia" class="md-nav__link">
      aesophia
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Sophia Libraries
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Sophia Libraries" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        <span class="md-nav__icon md-icon"></span>
        Sophia Libraries
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../aepp-sophia-examples/libraries/DateTime/" title="DateTime" class="md-nav__link">
      DateTime
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../aepp-sophia-examples/libraries/List/" title="List" class="md-nav__link">
      List
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../aepp-sophia-examples/libraries/Ownable/" title="Ownable" class="md-nav__link">
      Ownable
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../aepp-sophia-examples/libraries/FungibleToken/" title="FungibleToken" class="md-nav__link">
      FungibleToken
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../aepp-sophia-examples/libraries/NonFungibleToken/" title="NonFungibleToken" class="md-nav__link">
      NonFungibleToken
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../aepp-sophia-examples/libraries/MultisignatureWallet/" title="MultisignatureWallet" class="md-nav__link">
      MultisignatureWallet
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      Getting Started
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        <span class="md-nav__icon md-icon"></span>
        Getting Started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/hello-world-with-sophia/" title="HelloWorld with Sophia" class="md-nav__link">
      HelloWorld with Sophia
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/coding-locally-with-aeproject/" title="Coding Locally with AEproject" class="md-nav__link">
      Coding Locally with AEproject
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/deploying-on-testnet/" title="Deploying on Testnet" class="md-nav__link">
      Deploying on Testnet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/deploying-on-mainnet/" title="Deploying on Mainnet" class="md-nav__link">
      Deploying on Mainnet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/advance-to-do-aepp/" title="Advance ToDo aepp" class="md-nav__link">
      Advance ToDo aepp
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-sophia-language" class="md-nav__link">
    The Sophia Language
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    Table of Contents
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#language-features" class="md-nav__link">
    Language Features
  </a>
  
    <nav class="md-nav" aria-label="Language Features">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#contracts" class="md-nav__link">
    Contracts
  </a>
  
    <nav class="md-nav" aria-label="Contracts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#calling-other-contracts" class="md-nav__link">
    Calling other contracts
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mutable-state" class="md-nav__link">
    Mutable state
  </a>
  
    <nav class="md-nav" aria-label="Mutable state">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stateful-functions" class="md-nav__link">
    Stateful functions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#payable" class="md-nav__link">
    Payable
  </a>
  
    <nav class="md-nav" aria-label="Payable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#payable-contracts" class="md-nav__link">
    Payable contracts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#payable-entrypoints" class="md-nav__link">
    Payable entrypoints
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#namespaces" class="md-nav__link">
    Namespaces
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#splitting-code-over-multiple-files" class="md-nav__link">
    Splitting code over multiple files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#types" class="md-nav__link">
    Types
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#literals" class="md-nav__link">
    Literals
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arithmetic" class="md-nav__link">
    Arithmetic
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bit-fields" class="md-nav__link">
    Bit fields
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#type-aliases" class="md-nav__link">
    Type aliases
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#algebraic-data-types" class="md-nav__link">
    Algebraic data types
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lists" class="md-nav__link">
    Lists
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#maps-and-records" class="md-nav__link">
    Maps and records
  </a>
  
    <nav class="md-nav" aria-label="Maps and records">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#constructing-maps-and-records" class="md-nav__link">
    Constructing maps and records
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accessing-values" class="md-nav__link">
    Accessing values
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updating-a-value" class="md-nav__link">
    Updating a value
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#builtin-functions-on-maps" class="md-nav__link">
    Builtin functions on maps
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#map-implementation" class="md-nav__link">
    Map implementation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strings" class="md-nav__link">
    Strings
  </a>
  
    <nav class="md-nav" aria-label="Strings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#builtin-functions-on-strings" class="md-nav__link">
    Builtin functions on strings
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#byte-arrays" class="md-nav__link">
    Byte arrays
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#builtin-functions-on-integers" class="md-nav__link">
    Builtin functions on integers
  </a>
  
    <nav class="md-nav" aria-label="Builtin functions on integers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#builtin-functions-on-addresses" class="md-nav__link">
    Builtin functions on addresses
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#builtins" class="md-nav__link">
    Builtins
  </a>
  
    <nav class="md-nav" aria-label="Builtins">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cryptographic-primitives" class="md-nav__link">
    Cryptographic primitives
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#authorization-interface" class="md-nav__link">
    Authorization interface
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#account-interface" class="md-nav__link">
    Account interface
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oracle-interface" class="md-nav__link">
    Oracle interface
  </a>
  
    <nav class="md-nav" aria-label="Oracle interface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#oracle-register" class="md-nav__link">
    Oracle register
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oracle-extend" class="md-nav__link">
    Oracle extend
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oracle-get_question" class="md-nav__link">
    Oracle get_question
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oracle-respond" class="md-nav__link">
    Oracle respond
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oracle-query" class="md-nav__link">
    Oracle query
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oracle-query_fee" class="md-nav__link">
    Oracle query_fee
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oracle-get_answer" class="md-nav__link">
    Oracle get_answer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oracle-check" class="md-nav__link">
    Oracle check
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oracle-check_query" class="md-nav__link">
    Oracle check_query
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aens-interface" class="md-nav__link">
    AENS interface
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#events" class="md-nav__link">
    Events
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#contract-primitives" class="md-nav__link">
    Contract primitives
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compiler-pragmas" class="md-nav__link">
    Compiler pragmas
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#standard-library" class="md-nav__link">
    Standard library
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exceptions" class="md-nav__link">
    Exceptions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#syntax" class="md-nav__link">
    Syntax
  </a>
  
    <nav class="md-nav" aria-label="Syntax">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lexical-syntax" class="md-nav__link">
    Lexical syntax
  </a>
  
    <nav class="md-nav" aria-label="Lexical syntax">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comments" class="md-nav__link">
    Comments
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keywords" class="md-nav__link">
    Keywords
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tokens" class="md-nav__link">
    Tokens
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#layout-blocks" class="md-nav__link">
    Layout blocks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notation" class="md-nav__link">
    Notation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#declarations" class="md-nav__link">
    Declarations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#types_1" class="md-nav__link">
    Types
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#statements" class="md-nav__link">
    Statements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#expressions" class="md-nav__link">
    Expressions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operators-types" class="md-nav__link">
    Operators types
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operator-precendences" class="md-nav__link">
    Operator precendences
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    Examples
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-lifetime-of-a-contract" class="md-nav__link">
    The lifetime of a contract
  </a>
  
    <nav class="md-nav" aria-label="The lifetime of a contract">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#killing-a-contract" class="md-nav__link">
    Killing a contract
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-sophia_01-abi" class="md-nav__link">
    The Sophia_01 ABI
  </a>
  
    <nav class="md-nav" aria-label="The Sophia_01 ABI">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#byte-code" class="md-nav__link">
    Byte code
  </a>
  
    <nav class="md-nav" aria-label="Byte code">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#meta-data" class="md-nav__link">
    Meta data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#type-information" class="md-nav__link">
    Type information
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-layout" class="md-nav__link">
    Memory layout
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encoding-sophia-values-as-binaries" class="md-nav__link">
    Encoding Sophia values as binaries
  </a>
  
    <nav class="md-nav" aria-label="Encoding Sophia values as binaries">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#binary-encoding-of-sophia-maps" class="md-nav__link">
    Binary encoding of Sophia maps
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initialization" class="md-nav__link">
    Initialization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#return" class="md-nav__link">
    Return
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#storing-the-contract-state" class="md-nav__link">
    Storing the contract state
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remote-contract-calls" class="md-nav__link">
    Remote contract calls
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delegation-signature" class="md-nav__link">
    Delegation signature
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/aeternity/documentation-hub/edit/master/docs/protocol/contracts/sophia.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                  <h1>The Sophia Language</h1>
                
                <p><a href="../contracts/">back</a></p>
<h2 id="the-sophia-language">The Sophia Language</h2>
<p>An Æternity BlockChain Language</p>
<p>The Sophia is a language in the ML family. It is strongly typed and has
restricted mutable state.</p>
<p>Sophia is customized for smart contracts, which can be published
to a blockchain (the Æternity BlockChain). Thus some features of conventional
languages, such as floating point arithmetic, are not present in Sophia, and
some blockchain specific primitives, constructions and types have been added.</p>
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#language-features">Language Features</a><ul>
<li><a href="#contracts">Contracts</a><ul>
<li><a href="#calling-other-contracts">Calling other contracts</a></li>
</ul>
</li>
<li><a href="#mutable-state">Mutable state</a><ul>
<li><a href="#stateful-functions">Stateful functions</a></li>
</ul>
</li>
<li><a href="#payable">Payable</a><ul>
<li><a href="#payable-contracts">Payable contracts</a></li>
<li><a href="#payable-entrypoints">Payable entrypoints</a></li>
</ul>
</li>
<li><a href="#namespaces">Namespaces</a></li>
<li><a href="#splitting-code-over-multiple-files">Splitting code over multiple files</a></li>
<li><a href="#types">Types</a></li>
<li><a href="#literals">Literals</a></li>
<li><a href="#arithmetic">Arithmetic</a></li>
<li><a href="#bit-fields">Bit fields</a></li>
<li><a href="#type-aliases">Type aliases</a></li>
<li><a href="#algebraic-data-types">Algebraic data types</a></li>
<li><a href="#lists">Lists</a></li>
<li><a href="#maps-and-records">Maps and records</a><ul>
<li><a href="#constructing-maps-and-records">Constructing maps and records</a></li>
<li><a href="#accessing-values">Accessing values</a></li>
<li><a href="#updating-a-value">Updating a value</a></li>
<li><a href="#builtin-functions-on-maps">Builtin functions on maps</a></li>
<li><a href="#map-implementation">Map implementation</a></li>
</ul>
</li>
<li><a href="#strings">Strings</a><ul>
<li><a href="#builtin-functions-on-strings">Builtin functions on strings</a></li>
</ul>
</li>
<li><a href="#byte-arrays">Byte arrays</a></li>
<li><a href="#builtin-functions-on-integers">Builtin functions on integers</a><ul>
<li><a href="#builtin-functions-on-addresses">Builtin functions on addresses</a></li>
</ul>
</li>
<li><a href="#builtins">Builtins</a><ul>
<li><a href="#cryptographic-primitives">Cryptographic primitives</a></li>
<li><a href="#authorization-interface">Authorization interface</a></li>
<li><a href="#account-interface">Account interface</a></li>
<li><a href="#oracle-interface">Oracle interface</a><ul>
<li><a href="#oracle-register">Oracle register</a></li>
<li><a href="#oracle-extend">Oracle extend</a></li>
<li><a href="#oracle-get_question">Oracle get_question</a></li>
<li><a href="#oracle-respond">Oracle respond</a></li>
<li><a href="#oracle-query">Oracle query</a></li>
<li><a href="#oracle-query_fee">Oracle query_fee</a></li>
<li><a href="#oracle-get_answer">Oracle get_answer</a></li>
<li><a href="#example">Example</a></li>
<li><a href="#oracle-check">Oracle check</a></li>
<li><a href="#oracle-check_query">Oracle check_query</a></li>
</ul>
</li>
<li><a href="#aens-interface">AENS interface</a></li>
<li><a href="#events">Events</a></li>
<li><a href="#contract-primitives">Contract primitives</a></li>
</ul>
</li>
<li><a href="#compiler-pragmas">Compiler pragmas</a></li>
<li><a href="#standard-library">Standard library</a></li>
<li><a href="#exceptions">Exceptions</a></li>
</ul>
</li>
<li><a href="#syntax">Syntax</a><ul>
<li><a href="#lexical-syntax">Lexical syntax</a><ul>
<li><a href="#comments">Comments</a></li>
<li><a href="#keywords">Keywords</a></li>
<li><a href="#tokens">Tokens</a></li>
</ul>
</li>
<li><a href="#layout-blocks">Layout blocks</a></li>
<li><a href="#notation">Notation</a></li>
<li><a href="#declarations">Declarations</a></li>
<li><a href="#types">Types</a></li>
<li><a href="#statements">Statements</a></li>
<li><a href="#expressions">Expressions</a></li>
<li><a href="#operators-types">Operators types</a></li>
<li><a href="#operator-precendences">Operator precendences</a></li>
</ul>
</li>
<li><a href="#examples">Examples</a></li>
<li><a href="#the-lifetime-of-a-contract">The lifetime of a contract</a><ul>
<li><a href="#killing-a-contract">Killing a contract</a></li>
</ul>
</li>
<li><a href="#the-sophia_01-abi">The Sophia_01 ABI</a><ul>
<li><a href="#byte-code">Byte code</a><ul>
<li><a href="#meta-data">Meta data</a></li>
<li><a href="#type-information">Type information</a></li>
</ul>
</li>
<li><a href="#memory-layout">Memory layout</a></li>
<li><a href="#encoding-sophia-values-as-binaries">Encoding Sophia values as binaries</a><ul>
<li><a href="#binary-encoding-of-sophia-maps">Binary encoding of Sophia maps</a></li>
</ul>
</li>
<li><a href="#initialization">Initialization</a></li>
<li><a href="#return">Return</a></li>
<li><a href="#storing-the-contract-state">Storing the contract state</a></li>
<li><a href="#remote-contract-calls">Remote contract calls</a></li>
</ul>
</li>
</ul>
<h2 id="language-features">Language Features</h2>
<h3 id="contracts">Contracts</h3>
<p>The main unit of code in Sophia is the <em>contract</em>.</p>
<ul>
<li>A contract implementation, or simply a contract, is the code for a
  smart contract and consists of a list of types, entrypoints and local
  functions. Only the entrypoints can be called from outside the contract.</li>
<li>A contract instance is an entity living on the block chain (or in a state
  channel). Each instance has an address that can be used to call its
  entrypoints, either from another contract or in a call transaction.</li>
<li>A contract may define a type state encapsulating its local
  state. When creating a new contract the <code>init</code> entrypoint is executed and the
  state is initialized to its return value.</li>
</ul>
<h4 id="calling-other-contracts">Calling other contracts</h4>
<p>To call a function in another contract you need the address to an instance of
the contract. The type of the address must be a contract type, which consists
of a number of type definitions and entrypoint declarations. For instance,</p>
<pre><code class="javascript">// A contract type
contract VotingType =
  entrypoint vote : string =&gt; unit
</code></pre>

<p>Now given contract address of type <code>VotingType</code> you can call the <code>vote</code>
entrypoint of that contract:</p>
<pre><code class="javascript">contract VoteTwice =
  entrypoint voteTwice(v : VotingType, alt : string) =
    v.vote(alt)
    v.vote(alt)
</code></pre>

<p>Contract calls take two optional named arguments <code>gas : int</code> and <code>value : int</code>
that lets you set a gas limit and provide tokens to a contract call. If omitted
the defaults are no gas limit and no tokens. Suppose there is a fee for voting:</p>
<pre><code class="javascript">  entrypoint voteTwice(v : VotingType, fee : int, alt : string) =
    v.vote(value = fee, alt)
    v.vote(value = fee, alt)
</code></pre>

<p>Named arguments can be given in any order.</p>
<p>Note that reentrant calls are not permitted. In other words, when calling
another contract it cannot call you back (directly or indirectly).</p>
<p>To construct a value of a contract type you can give a contract address literal
(for instance <code>ct_2gPXZnZdKU716QBUFKaT4VdBZituK93KLvHJB3n4EnbrHHw4Ay</code>), or
convert an account address to a contract address using <code>Address.to_contract</code>.
Note that if the contract does not exist, or it doesn't have the entrypoint, or
the type of the entrypoint does not match the stated contract type, the call
fails.</p>
<p>To recover the underlying <code>address</code> of a contract instance there is a field
<code>address : address</code>. For instance, to send tokens to the voting contract (given that it is payable)
without calling it you can write</p>
<pre><code class="javascript">  entrypoint pay(v : VotingType, amount : int) =
    Chain.spend(v.address, amount)
</code></pre>

<h3 id="mutable-state">Mutable state</h3>
<p>Sophia does not have arbitrary mutable state, but only a limited form of
state associated with each contract instance.</p>
<ul>
<li>Each contract defines a type <code>state</code> encapsulating its mutable state.
  The type <code>state</code> defaults to the <code>unit</code>.</li>
<li>The initial state of a contract is computed by the contract's <code>init</code>
  function. The <code>init</code> function is <em>pure</em> and returns the initial state as its
  return value.
  If the type <code>state</code> is <code>unit</code>, the <code>init</code> function defaults to returning the value <code>()</code>.
  At contract creation time, the <code>init</code> function is executed and
  its result is stored as the contract state.</li>
<li>The value of the state is accessible from inside the contract
  through an implicitly bound variable <code>state</code>.</li>
<li>State updates are performed by calling a function <code>put : state =&gt; unit</code>.</li>
<li>Aside from the <code>put</code> function (and similar functions for transactions
  and events), the language is purely functional.</li>
<li>Functions modifying the state need to be annotated with the <code>stateful</code> keyword (see below).</li>
</ul>
<p>To make it convenient to update parts of a deeply nested state Sophia
provides special syntax for map/record updates.</p>
<h4 id="stateful-functions">Stateful functions</h4>
<p>Top-level functions and entrypoints must be annotated with the
<code>stateful</code> keyword to be allowed to affect the state of the running contract.
For instance,</p>
<pre><code class="javascript">  stateful entrypoint set_state(s : state) =
    put(s)
</code></pre>

<p>Without the <code>stateful</code> annotation the compiler does not allow the call to
<code>put</code>. A <code>stateful</code> annotation is required to</p>
<ul>
<li>Use a stateful primitive function. These are</li>
<li><code>put</code></li>
<li><code>Chain.spend</code></li>
<li><code>Oracle.register</code></li>
<li><code>Oracle.query</code></li>
<li><code>Oracle.respond</code></li>
<li><code>Oracle.extend</code></li>
<li><code>AENS.preclaim</code></li>
<li><code>AENS.claim</code></li>
<li><code>AENS.transfer</code></li>
<li><code>AENS.revoke</code></li>
<li>Call a <code>stateful</code> function in the current contract</li>
<li>Call another contract with a non-zero <code>value</code> argument.</li>
</ul>
<p>A <code>stateful</code> annotation <em>is not</em> required to</p>
<ul>
<li>Read the contract state.</li>
<li>Issue an event using the <code>event</code> function.</li>
<li>Call another contract with <code>value = 0</code>, even if the called function is stateful.</li>
</ul>
<h3 id="payable">Payable</h3>
<h4 id="payable-contracts">Payable contracts</h4>
<p>A concrete contract is by default <em>not</em> payable. Any attempt at spending to such
a contract (either a <code>Chain.spend</code> or a normal spend transaction) will fail. If a
contract shall be able to receive funds in this way it has to be declared <code>payable</code>:</p>
<pre><code class="javascript">// A payable contract
payable contract ExampleContract =
  stateful entrypoint do_stuff() = ...
</code></pre>

<p>If in doubt, it is possible to check if an address is payable using
<code>Address.is_payable(addr)</code>.</p>
<h4 id="payable-entrypoints">Payable entrypoints</h4>
<p>A contract entrypoint is by default <em>not</em> payable. Any call to such a function
(either a <a href="#calling-other-contracts">Remote call</a> or a contract call transaction)
that has a non-zero <code>value</code> will fail. Contract entrypoints that should be called
with a non-zero value should be declared <code>payable</code>.</p>
<pre><code class="javascript">payable stateful entrypoint buy(to : address) =
  if(Call.value &gt; 42)
    transfer_item(to)
  else
    abort(&quot;Value too low&quot;)
</code></pre>

<p>Note: In the Aeternity VM (AEVM) contracts and entrypoints were by default
payable until the Lima release.</p>
<h3 id="namespaces">Namespaces</h3>
<p>Code can be split into libraries using the <code>namespace</code> construct. Namespaces
can appear at the top-level and can contain type and function definitions, but
not entrypoints. Outside the namespace you can refer to the (non-private) names
by qualifying them with the namespace (<code>Namespace.name</code>).
For example,</p>
<pre><code>namespace Library =
  type number = int
  function inc(x : number) : number = x + 1

contract MyContract =
  entrypoint plus2(x) : Library.number =
    Library.inc(Library.inc(x))
</code></pre>

<p>Functions in namespaces have access to the same environment (including the
<code>Chain</code>, <code>Call</code>, and <code>Contract</code>, builtin namespaces) as function in a contract,
with the exception of <code>state</code>, <code>put</code> and <code>Chain.event</code> since these are
dependent on the specific state and event types of the contract.</p>
<h3 id="splitting-code-over-multiple-files">Splitting code over multiple files</h3>
<p>Code from another file can be included in a contract using an <code>include</code>
statement. These must appear at the top-level (outside the main contract). The
included file can contain one or more namespaces and abstract contracts. For
example, if the file <code>library.aes</code> contains</p>
<pre><code>namespace Library =
  function inc(x) = x + 1
</code></pre>

<p>you can use it from another file using an <code>include</code>:</p>
<pre><code>include &quot;library.aes&quot;
contract MyContract =
  entrypoint plus2(x) = Library.inc(Library.inc(x))
</code></pre>

<p>This behaves as if the contents of <code>library.aes</code> was textually inserted into
the file, except that error messages will refer to the original source
locations.</p>
<h3 id="types">Types</h3>
<p>Sophia has the following types:</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
<th align="right">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>int</td>
<td>A 2-complement integer</td>
<td align="right"><code>-1</code></td>
</tr>
<tr>
<td>address</td>
<td>Aeternity address, 32 bytes</td>
<td align="right"><code>Call.origin</code></td>
</tr>
<tr>
<td>bool</td>
<td>A Boolean</td>
<td align="right"><code>true</code></td>
</tr>
<tr>
<td>bits</td>
<td>A bit field</td>
<td align="right"><code>Bits.none</code></td>
</tr>
<tr>
<td>bytes(n)</td>
<td>A byte array with <code>n</code> bytes</td>
<td align="right"><code>#fedcba9876543210</code></td>
</tr>
<tr>
<td>string</td>
<td>An array of bytes</td>
<td align="right"><code>"Foo"</code></td>
</tr>
<tr>
<td>list</td>
<td>A homogeneous immutable singly linked list.</td>
<td align="right"><code>[1, 2, 3]</code></td>
</tr>
<tr>
<td>tuple</td>
<td>An ordered heterogeneous array</td>
<td align="right"><code>(42, "Foo", true)</code></td>
</tr>
<tr>
<td>record</td>
<td>An immutable key value store with fixed key names and typed values</td>
<td align="right"><code>record balance = { owner: address, value: int }</code></td>
</tr>
<tr>
<td>map</td>
<td>An immutable key value store with dynamic mapping of keys of one type to values of one type</td>
<td align="right"><code>type accounts = map(string, address)</code></td>
</tr>
<tr>
<td>option('a)</td>
<td>An optional value either None or Some('a)</td>
<td align="right"><code>Some(42)</code></td>
</tr>
<tr>
<td>state</td>
<td>A user defined type holding the contract state</td>
<td align="right"><code>record state = { owner: address, magic_key: bytes(4) }</code></td>
</tr>
<tr>
<td>event</td>
<td>An append only list of blockchain events (or log entries)</td>
<td align="right"><code>datatype event = EventX(indexed int, string)</code></td>
</tr>
<tr>
<td>hash</td>
<td>A 32-byte hash - equivalent to <code>bytes(32)</code></td>
<td align="right"></td>
</tr>
<tr>
<td>signature</td>
<td>A signature - equivalent to <code>bytes(64)</code></td>
<td align="right"></td>
</tr>
<tr>
<td>Chain.ttl</td>
<td>Time-to-live (fixed height or relative to current block)</td>
<td align="right"><code>FixedTTL(1050)</code> <code>RelativeTTL(50)</code></td>
</tr>
<tr>
<td>oracle('a, 'b)</td>
<td>And oracle answering questions of type 'a with answers of type 'b</td>
<td align="right"><code>Oracle.register(acct, qfee, ttl)</code></td>
</tr>
<tr>
<td>oracle_query('a, 'b)</td>
<td>A specific oracle query</td>
<td align="right"><code>Oracle.query(o, q, qfee, qttl, rttl)</code></td>
</tr>
<tr>
<td>contract</td>
<td>A user defined, typed, contract address</td>
<td align="right"><code>function call_remote(r : RemoteContract) = r.fun()</code></td>
</tr>
</tbody>
</table>
<h3 id="literals">Literals</h3>
<table>
<thead>
<tr>
<th>Type</th>
<th>Constant/Literal example(s)</th>
</tr>
</thead>
<tbody>
<tr>
<td>int</td>
<td><code>-1</code>, <code>2425</code>, <code>4598275923475723498573485768</code></td>
</tr>
<tr>
<td>address</td>
<td><code>ak_2gx9MEFxKvY9vMG5YnqnXWv1hCsX7rgnfvBLJS4aQurustR1rt</code></td>
</tr>
<tr>
<td>bool</td>
<td><code>true</code>, <code>false</code></td>
</tr>
<tr>
<td>bits</td>
<td><code>Bits.none</code>, <code>Bits.all</code></td>
</tr>
<tr>
<td>bytes(8)</td>
<td><code>#fedcba9876543210</code></td>
</tr>
<tr>
<td>string</td>
<td><code>"This is a string"</code></td>
</tr>
<tr>
<td>list</td>
<td><code>[1, 2, 3]</code>, <code>[(true, 24), (false, 19), (false, -42)]</code></td>
</tr>
<tr>
<td>tuple</td>
<td><code>(42, "Foo", true)</code></td>
</tr>
<tr>
<td>record</td>
<td><code>{ owner = Call.origin, value = 100000000 }</code></td>
</tr>
<tr>
<td>map</td>
<td><code>{["foo"] = 19, ["bar"] = 42}</code>, <code>{}</code></td>
</tr>
<tr>
<td>option(int)</td>
<td><code>Some(42)</code>, <code>None</code></td>
</tr>
<tr>
<td>state</td>
<td><code>state{ owner = Call.origin, magic_key = #a298105f }</code></td>
</tr>
<tr>
<td>event</td>
<td><code>EventX(0, "Hello")</code></td>
</tr>
<tr>
<td>hash</td>
<td><code>#000102030405060708090a0b0c0d0e0f000102030405060708090a0b0c0d0e0f</code></td>
</tr>
<tr>
<td>signature</td>
<td><code>#000102030405060708090a0b0c0d0e0f000102030405060708090a0b0c0d0e0f000102030405060708090a0b0c0d0e0f000102030405060708090a0b0c0d0e0f</code></td>
</tr>
<tr>
<td>Chain.ttl</td>
<td><code>FixedTTL(1050)</code>, <code>RelativeTTL(50)</code></td>
</tr>
<tr>
<td>oracle('a, 'b)</td>
<td><code>ok_2YNyxd6TRJPNrTcEDCe9ra59SVUdp9FR9qWC5msKZWYD9bP9z5</code></td>
</tr>
<tr>
<td>oracle_query('a, 'b)</td>
<td><code>oq_2oRvyowJuJnEkxy58Ckkw77XfWJrmRgmGaLzhdqb67SKEL1gPY</code></td>
</tr>
<tr>
<td>contract</td>
<td><code>ct_Ez6MyeTMm17YnTnDdHTSrzMEBKmy7Uz2sXu347bTDPgVH2ifJ</code></td>
</tr>
</tbody>
</table>
<h3 id="arithmetic">Arithmetic</h3>
<p>Sophia integers (<code>int</code>) are represented by 256-bit (AEVM) or arbitrary-sized (FATE) signed words and supports the following
arithmetic operations:
- addition (<code>x + y</code>)
- subtraction (<code>x - y</code>)
- multiplication (<code>x * y</code>)
- division (<code>x / y</code>), truncated towards zero
- remainder (<code>x mod y</code>), satisfying <code>y * (x / y) + x mod y == x</code> for non-zero <code>y</code>
- exponentiation (<code>x ^ y</code>)</p>
<p>All operations are <em>safe</em> with respect to overflow and underflow. On AEVM they behave as the corresponding
operations on arbitrary-size integers and fail with <code>arithmetic_error</code> if the
result cannot be represented by a 256-bit signed word. For example, <code>2 ^ 255</code>
fails rather than wrapping around to -2²⁵⁵.</p>
<p>The division and modulo operations also throw an arithmetic error if the
second argument is zero.</p>
<h3 id="bit-fields">Bit fields</h3>
<p>Sophia integers do not support bit arithmetic. Instead there is a separate
type <code>bits</code> of bit fields that support similar operations:</p>
<pre><code class="javascript">// A bit field with all bits cleared
Bits.none : bits

// A bit field with all bits set
Bits.all : bits

// Set bit i
Bits.set(b : bits, i : int) : bits

// Clear bit i
Bits.clear(b : bits, i : int) : bits

// Check if bit i is set
Bits.test(b : bits, i : int) : bool

// Count the number of set bits
Bits.sum(b : bits) : int

// Bits.test(Bits.union(a, b), i) == (Bits.test(a, i) || Bits.test(b, i))
Bits.union(a : bits, b : bits) : bits

// Bits.test(Bits.intersection(a, b), i) == (Bits.test(a, i) &amp;&amp; Bits.test(b, i))
Bits.intersection(a : bits, b : bits) : bits

// Bits.test(Bits.difference(a, b), i) == (Bits.test(a, i) &amp;&amp; !Bits.test(b, i))
Bits.difference(a : bits, b : bits) : bits
</code></pre>

<p>On the AEVM a bit field is represented by a 256-bit word and reading or writing
a bit outside the 0..255 range fails with an <code>arithmetic_error</code>. On FATE a bit
field can be of arbitrary size (but it is still represented by the
corresponding integer, so setting very high bits can be expensive).</p>
<h3 id="type-aliases">Type aliases</h3>
<p>Type aliases can be introduced with the <code>type</code> keyword and can be
parameterized. For instance</p>
<pre><code>type number = int
type string_map('a) = map(string, 'a)
</code></pre>

<p>A type alias and its definition can be used interchangeably.</p>
<h3 id="algebraic-data-types">Algebraic data types</h3>
<p>Sophia supports algebraic data types (variant types) and pattern matching. Data
types are declared by giving a list of constructors with
their respective arguments. For instance,</p>
<pre><code>datatype one_or_both('a, 'b) = Left('a) | Right('b) | Both('a, 'b)
</code></pre>

<p>Elements of data types can be pattern matched against, using the <code>switch</code> construct:</p>
<pre><code>function get_left(x : one_or_both('a, 'b)) : option('a) =
  switch(x)
    Left(x)    =&gt; Some(x)
    Right(_)   =&gt; None
    Both(x, _) =&gt; Some(x)
</code></pre>

<p>or directly in the left-hand side:</p>
<pre><code>function
  get_left : one_or_both('a, 'b) =&gt; option('a)
  get_left(Left(x))    = Some(x)
  get_left(Right(_))   = None
  get_left(Both(x, _)) = Some(x)
</code></pre>

<p><em>NOTE: Data types cannot currently be recursive.</em></p>
<h3 id="lists">Lists</h3>
<p>A Sophia list is a dynamically sized, homogenous, immutable, singly
linked list. A list is constructed with the syntax <code>[1, 2, 3]</code>. The
elements of a list can be any of datatype but they must have the same
type. The type of lists with elements of type <code>'e</code> is written
<code>list('e)</code>. For example we can have the following lists:</p>
<pre><code>[1, 33, 2, 666]                                                   : list(int)
[(1, &quot;aaa&quot;), (10, &quot;jjj&quot;), (666, &quot;the beast&quot;)]                     : list(int * string)
[{[1] = &quot;aaa&quot;, [10] = &quot;jjj&quot;}, {[5] = &quot;eee&quot;, [666] = &quot;the beast&quot;}] : list(map(int, string))
</code></pre>

<p>New elements can be prepended to the front of a list with the <code>::</code>
operator. So <code>42 :: [1, 2, 3]</code> returns the list <code>[42, 1, 2, 3]</code>. The
concatenation operator <code>++</code> appends its second argument to its first
and returns the resulting list. So concatenating two lists
<code>[1, 22, 33] ++ [10, 18, 55]</code> returns the list <code>[1, 22, 33, 10, 18, 55]</code>.</p>
<p>Sophia supports list comprehensions known from languages like Python, Haskell or Erlang.
Example syntax:</p>
<pre><code>[x + y | x &lt;- [1,2,3,4,5], let k = x*x, if (k &gt; 5), y &lt;- [k, k+1, k+2]]
// yields [12,13,14,20,21,22,30,31,32]
</code></pre>

<h3 id="maps-and-records">Maps and records</h3>
<p>A Sophia record type is given by a fixed set of fields with associated,
possibly different, types. For instance</p>
<pre><code>  record account = { name    : string,
                     balance : int,
                     history : list(transaction) }
</code></pre>

<p>Maps, on the other hand, can contain an arbitrary number of key-value bindings,
but of a fixed type. The type of maps with keys of type <code>'k</code> and values of type
<code>'v</code> is written <code>map('k, 'v)</code>. The key type can be any type that does not
contain a map or a function type.</p>
<h4 id="constructing-maps-and-records">Constructing maps and records</h4>
<p>A value of record type is constructed by giving a value for each of the fields.
For the example above,</p>
<pre><code>  function new_account(name) =
    {name = name, balance = 0, history = []}
</code></pre>

<p>Maps are constructed similarly, with keys enclosed in square brackets</p>
<pre><code>  function example_map() : map(string, int) =
    {[&quot;key1&quot;] = 1, [&quot;key2&quot;] = 2}
</code></pre>

<p>The empty map is written <code>{}</code>.</p>
<h4 id="accessing-values">Accessing values</h4>
<p>Record fields access is written <code>r.f</code> and map lookup <code>m[k]</code>. For instance,</p>
<pre><code>  function get_balance(a : address, accounts : map(address, account)) =
    accounts[a].balance
</code></pre>

<p>Looking up a non-existing key in a map results in contract execution failing. A
default value to return for non-existing keys can be provided using the syntax
<code>m[k = default]</code>. See also <code>Map.member</code> and <code>Map.lookup</code> below.</p>
<h4 id="updating-a-value">Updating a value</h4>
<p>Record field updates are written <code>r{f = v}</code>. This creates a new record value
which is the same as <code>r</code>, but with the value of the field <code>f</code> replaced by <code>v</code>.
Similarly, <code>m{[k] = v}</code> constructs a map with the same values as <code>m</code> except
that <code>k</code> maps to <code>v</code>. It makes no difference if <code>m</code> has a mapping for <code>k</code> or
not.</p>
<p>It is possible to give a name to the old value of a field or mapping in an
update: instead of <code>acc{ balance = acc.balance + 100 }</code> it is possible to write
<code>acc{ balance @ b = b + 100 }</code>, binding <code>b</code> to <code>acc.balance</code>. When giving a
name to a map value (<code>m{ [k] @ x = v }</code>), the corresponding key must be present
in the map or execution fails, but a default value can be provided:
<code>m{ [k = default] @ x = v }</code>. In this case <code>x</code> is bound to <code>default</code> if
<code>k</code> is not in the map.</p>
<p>Updates can be nested:</p>
<pre><code>function clear_history(a : address, accounts : map(address, account)) : map(address, account) =
  accounts{ [a].history = [] }
</code></pre>

<p>This is equivalent to <code>accounts{ [a] @ acc = acc{ history = [] } }</code> and thus
requires <code>a</code> to be present in the accounts map. To have <code>clear_history</code> create
an account if <code>a</code> is not in the map you can write (given a function <code>empty_account</code>):</p>
<pre><code>  accounts{ [a = empty_account()].history = [] }
</code></pre>

<h4 id="builtin-functions-on-maps">Builtin functions on maps</h4>
<p>The following builtin functions are defined on maps:</p>
<pre><code>  Map.lookup(k : 'k, m : map('k, 'v)) : option('v)
  Map.lookup_default(k : 'k, m : map('k, 'v), v : 'v) : 'v
  Map.member(k : 'k, m : map('k, 'v)) : bool
  Map.delete(k : 'k, m : map('k, 'v)) : map('k, 'v)
  Map.size(m : map('k, 'v)) : int
  Map.to_list(m : map('k, 'v)) : list('k * 'v)
  Map.from_list(m : list('k * 'v)) : map('k, 'v)
</code></pre>

<h4 id="map-implementation">Map implementation</h4>
<p>Internally in the VM maps are implemented as hash maps and support fast lookup
and update. Large maps can be stored in the contract state and the size of the
map does not contribute to the gas costs of a contract call reading or updating
it.</p>
<h3 id="strings">Strings</h3>
<p>There is a builtin type <code>string</code>, which can be seen as an array of bytes.
Strings can be compared for equality (<code>==</code>, <code>!=</code>), used as keys in maps and
records, and used in builtin functions <code>String.length</code>, <code>String.concat</code> and
the hash functions described below.</p>
<h4 id="builtin-functions-on-strings">Builtin functions on strings</h4>
<p>The following builtin functions are defined on strings:</p>
<pre><code>  String.length(s : string) : int
  String.concat(s1 : string, s2 : string) : string
  String.sha3(s : string) : hash
  String.sha256(s : string) : hash
  String.blake2b(s : string) : hash
</code></pre>

<p>The hash functions hashes the string represented as byte array.</p>
<h3 id="byte-arrays">Byte arrays</h3>
<p>The following builtin functions are defined on byte arrays:</p>
<pre><code>  Bytes.to_int(b : bytes(n)) : int
  Bytes.to_str(b : bytes(n)) : string
  Bytes.concat(a : bytes(m), b : bytes(n)) : bytes(m + n)
  Bytes.split(a : bytes(m + n)) : bytes(m) * bytes(n)
</code></pre>

<p>for any concrete values of <code>m</code> and <code>n</code>. In other words, for each call to one of
these functions the values of <code>m</code> and <code>n</code> must be known.</p>
<p><code>Bytes.to_int</code> interprets the byte array as a big endian integer. In the AEVM
backend it is truncated to fit in a 256-bit word. <code>Bytes.to_str</code> returns the
hexadecimal representation of the byte array. <code>Bytes.concat</code> concatenates two
byte arrays and <code>Bytes.split</code> splits a byte array in two. Note that the splitting point
is determined by the types and not given as an argument. Examples:</p>
<pre><code>  Bytes.to_int(#01ff) == 511
  Bytes.to_str(#10ff) == &quot;10FF&quot;
  Bytes.concat(#abcd, #ef) == #abcdef
  Bytes.split(#abcdef) == (#ab, #cdef)
  Bytes.split(#abcdef) == (#abcd, #ef)
</code></pre>

<h3 id="builtin-functions-on-integers">Builtin functions on integers</h3>
<p>The following builtin functions are defined on integers:</p>
<pre><code>  Int.to_str(i : int) : string
</code></pre>

<h4 id="builtin-functions-on-addresses">Builtin functions on addresses</h4>
<p>The following builtin functions are defined on addresses:</p>
<pre><code>  Address.to_str(a : address) : string    // Base58 encoded string
  Address.is_contract(a : address) : bool // Is the address a contract
  Address.is_oracle(a : address) : bool   // Is the address a registered oracle
  Address.is_payable(a : address) : bool  // Can the address be spent to
  Address.to_contract(a : address) : C    // Cast address to contract type C
</code></pre>

<h3 id="builtins">Builtins</h3>
<h4 id="cryptographic-primitives">Cryptographic primitives</h4>
<p>The following hash functions are supported:</p>
<pre><code>  Crypto.sha3(x : 'a) : hash
  Crypto.sha256(x : 'a) : hash
  Crypto.blake2b(x : 'a) : hash
  String.sha3(s : string) : hash
  String.sha256(s : string) : hash
  String.blake2b(s : string) : hash
</code></pre>

<p>The hash functions in <code>String</code> hashes a string interpreted as a byte array, and
the <code>Crypto</code> hash functions accept an element of any (first-order) type. The
result is the hash of the binary encoding of the argument as <a href="#encoding-sophia-values-as-binaries">described
below</a>. Note that this means that for <code>s :
string</code>, <code>String.sha3(s)</code> and <code>Crypto.sha3(s)</code> gives different results.</p>
<p>There are also functions for signature verification:</p>
<pre><code>  Crypto.verify_sig(msg : hash, pubkey : address, sig : signature) : bool
  Crypto.verify_sig_secp256k1(msg : hash, pubkey : bytes(64), sig : bytes(64)) : bool
</code></pre>

<p>The signature verification returns true if <code>sig</code> is the signature of <code>msg</code>
using the private key corresponding to <code>pubkey</code>.</p>
<p>The function <code>ecrecover_secp256k1</code> allows one to recover the
Ethereum style address from a msg hash and respective signature, and
<code>ecverify_secp256k1</code> will verify a signature for a msg hash against
an Ethereum style address:</p>
<pre><code>  Crypto.ecverify_secp256k1(msg : hash, addr : bytes(20), sig : bytes(65)) : bool
  Crypto.ecrecover_secp256k1(msg : hash, sig : bytes(65)) : option(bytes(20))
</code></pre>

<p><em>Note</em>: Before Sophia version 4, <code>verify_sig</code> was (incorrectly) named <code>ecverify</code>.</p>
<h4 id="authorization-interface">Authorization interface</h4>
<p>When a Generalized account is authorized, the authorization function needs
access to the transaction hash for the wrapped transaction. (A <code>GAMetaTx</code>
wrapping a transaction.) The transaction hash is available in the primitive
<code>Auth.tx_hash</code>, it is <em>only</em> available during authentication if invoked by a
normal contract call it returns <code>none</code>.</p>
<pre><code>Auth.tx_hash : option(hash)
</code></pre>

<h4 id="account-interface">Account interface</h4>
<p>To spend tokens from the contract account to the account "to" you call the <code>Chain.spend</code> function.</p>
<pre><code>Chain.spend(to : address, amount : integer)
</code></pre>

<h4 id="oracle-interface">Oracle interface</h4>
<p>You can attach an oracle to the current contract and you can interact with oracles
through the Oracle interface.</p>
<p>For a full description of how Oracle works see <a href="/oracles/oracles.md#oracles">Oracles</a></p>
<p>An Oracle operator will use the functions:
* <code>Oracle.register</code>
* <code>Oracle.get_question</code>
* <code>Oracle.respond</code>
* <code>Oracle.extend</code></p>
<p>An Oracle user will use the functions:
* <code>Oracle.query_fee</code>
* <code>Oracle.query</code>
* <code>Oracle.get_answer</code></p>
<p>Additional safety checks can use the functions:
* <code>Oracle.check</code>
* <code>Oracle.check_query</code></p>
<h5 id="oracle-register">Oracle register</h5>
<p>To register a new oracle answering questions of type <code>'a</code> with answers of type <code>'b</code>,
call <code>Oracle.register</code>:</p>
<pre><code>Oracle.register(acct       : address,
                &lt;signature : signature&gt;, // Signed account address + contract address
                                         // named argument (and thus optional)
                qfee       : int,
                ttl        : Chain.ttl) : oracle('a, 'b)
</code></pre>

<ul>
<li>The <code>acct</code> is the address of the oracle to register (can be the same as the contract).</li>
<li><code>signature</code> is a signature proving that the contract is allowed to register the account -
  the account address + the contract address (concatenated as byte arrays) is
  <a href="#delegation-signature">signed</a> with the
  private key of the account, proving you have the private key of the oracle to be. If the
  address is the same as the contract <code>sign</code> is ignored and can be left out entirely.</li>
<li>The <code>qfee</code> is the minimum query fee to be paid by a user when asking a question of the oracle.</li>
<li>The <code>ttl</code> is the Time To Live for the oracle, either relative to the current
  height (<code>RelativeTTL(delta)</code>) or a fixed height (<code>FixedTTL(height)</code>).</li>
<li>The type <code>'a</code> is the type of the question to ask.</li>
<li>The type <code>'b</code> is the type of the oracle answers.</li>
</ul>
<p>Examples:</p>
<pre><code>  Oracle.register(addr0, 25, RelativeTTL(400))
  Oracle.register(addr1, 25, RelativeTTL(500), signature = sign1)
</code></pre>

<h5 id="oracle-extend">Oracle extend</h5>
<p>To extend the TTL of an oracle, call <code>Oracle.extend</code>:</p>
<pre><code>Oracle.extend(o          : oracle('a, 'b),
              &lt;signature : signature&gt;,     // Signed oracle address + contract address
                                           // named argument (and thus optional)
              ttl        : Chain.ttl) : unit
</code></pre>

<p>The <code>ttl</code> is must be a relative TTL, relative to the current oracle expiry
height. For instance, passing <code>RelativeTTL(100)</code> adds 100 blocks to the expiry
time of the oracle. The <code>signature</code> is the same as for <code>Oracle.register</code>.</p>
<h5 id="oracle-get_question">Oracle get_question</h5>
<p>To check what the question of a query is, use the <code>Oracle.get_question</code> function:</p>
<pre><code>Oracle.get_question(o : oracle('a, 'b), q : oracle_query('a, 'b)) : 'a
</code></pre>

<h5 id="oracle-respond">Oracle respond</h5>
<p>To respond to an oracle question, use the <code>Oracle.respond</code> function:</p>
<pre><code>Oracle.respond(oracle     : oracle('a, 'b),
               query      : oracle_query('a, 'b),
               &lt;signature : signature&gt;,             // Signed oracle query id + contract address
                                                    // named argument (and thus optional)
               response   : 'b)
</code></pre>

<p>Unless the contract address is the same as the oracle address the <code>signature</code>
needs to be provided. Proving that we have the private key of the oracle by
<a href="#delegation-signature">signing</a> the oracle query id + contract address.</p>
<h5 id="oracle-query">Oracle query</h5>
<p>To ask an oracle a question, use the <code>Oracle.query</code> function:</p>
<pre><code>Oracle.query(o    : oracle('a, 'b),
             q    : 'a,
             qfee : int,
             qttl : Chain.ttl,
             rttl : Chain.ttl) : oracle_query('a, 'b)
</code></pre>

<ul>
<li>The <code>qfee</code> is the query fee debited to the contract account (<code>Contract.address</code>).</li>
<li>The <code>qttl</code> controls the last height at which the oracle can submit a response
  and can be either fixed or relative.</li>
<li>The <code>rttl</code> must be relative and controls how long an answer is kept on the chain.</li>
<li>The call fails if the oracle could expire before an answer.</li>
</ul>
<h5 id="oracle-query_fee">Oracle query_fee</h5>
<p>To ask the oracle what the query fee is, use the <code>Oracle.query_fee</code> function:</p>
<pre><code>Oracle.query_fee(o : oracle('a, 'b)) : int
</code></pre>

<h5 id="oracle-get_answer">Oracle get_answer</h5>
<p>To ask the oracle what the optional query answer is, use the <code>Oracle.get_answer</code> function:</p>
<pre><code>Oracle.get_answer(o : oracle('a, 'b), q : oracle_query('a, 'b)) : option('b)
</code></pre>

<h5 id="example">Example</h5>
<p>Example for an oracle answering questions of type <code>string</code> with answers of type <code>int</code>:</p>
<pre><code>contract Oracles =

  stateful entrypoint registerOracle(acct : address,
                                     sign : signature,   // Signed oracle address + contract address
                                     qfee : int,
                                     ttl  : Chain.ttl) : oracle(string, int) =
     Oracle.register(acct, signature = sign, qfee, ttl)

  entrypoint queryFee(o : oracle(string, int)) : int =
    Oracle.query_fee(o)

  payable stateful entrypoint createQuery(o    : oracle_query(string, int),
                                          q    : string,
                                          qfee : int,
                                          qttl : Chain.ttl,
                                          rttl : int) : oracle_query(string, int) =
    require(qfee =&lt; Call.value, &quot;insufficient value for qfee&quot;)
    Oracle.query(o, q, qfee, qttl, RelativeTTL(rttl))

  stateful entrypoint extendOracle(o   : oracle(string, int),
                                   ttl : Chain.ttl) : unit =
    Oracle.extend(o, ttl)

  stateful entrypoint signExtendOracle(o    : oracle(string, int),
                                     sign : signature,   // Signed oracle address + contract address
                                     ttl  : Chain.ttl) : unit =
    Oracle.extend(o, signature = sign, ttl)

  stateful entrypoint respond(o    : oracle(string, int),
                              q    : oracle_query(string, int),
                              sign : signature,        // Signed oracle query id + contract address
                              r    : int) =
    Oracle.respond(o, q, signature = sign, r)

  entrypoint getQuestion(o : oracle(string, int),
                         q : oracle_query(string, int)) : string =
    Oracle.get_question(o, q)

  entrypoint hasAnswer(o : oracle(string, int),
                       q : oracle_query(string, int)) =
    switch(Oracle.get_answer(o, q))
      None    =&gt; false
      Some(_) =&gt; true

  entrypoint getAnswer(o : oracle(string, int),
                       q : oracle_query(string, int)) : option(int) =
    Oracle.get_answer(o, q)
</code></pre>

<h5 id="oracle-check">Oracle check</h5>
<p>No deep check is performed when an Oracle literal is passed to a contract, for
extra safety a check function <code>Oracle.check</code> is provided. It returns true if
the oracle exist and has the expected type.</p>
<pre><code>Oracle.check(o : oracle('a, 'b)) : bool
</code></pre>

<h5 id="oracle-check_query">Oracle check_query</h5>
<p>No deep check is performed when an Oracle query literal is passed to a
contract, for extra safety a check function <code>Oracle.check_query</code> is provided.
It returns true if the oracle query exist and has the expected type.</p>
<pre><code>Oracle.check_query(o : oracle('a, 'b), q : oracle_query('a, 'b)) : bool
</code></pre>

<h4 id="aens-interface">AENS interface</h4>
<p>The following primitives are available for interacting with the Aeternity
Naming System (AENS):</p>
<ul>
<li>Name resolution
  <code>AENS.resolve(name : string, key : string) : option('a)</code>
  Here <code>name</code> should be a registered name and <code>key</code> one of the attributes
  associated with this name (for instance <code>"account_pubkey"</code>). The return type
  (<code>'a</code>) must be resolved at compile time to an atomic type and the value is
  type checked against this type at run time.</li>
<li>AENS transactions
  <code>AENS.preclaim(owner : address, commitment_hash : hash, &lt;signature : signature&gt;) : unit
  AENS.claim   (owner : address, name : string, salt : int, &lt;signature : signature&gt;) : unit
  AENS.transfer(owner : address, new_owner : address, name_hash : hash, &lt;signature : signature&gt;) : unit
  AENS.revoke  (owner : address, name_hash : hash, &lt;signature : signature&gt;) : unit</code>
  If <code>owner</code> is equal to <code>Contract.address</code> the signature <code>signature</code> is
  ignored, and can be left out since it is a named argument. Otherwise we need
  a signature to prove that we are allowed to do AENS operations on behalf of
  <code>owner</code>. For <code>AENS.preclaim</code> the <a href="#delegation-signature">signature</a>
  should be over <code>owner address</code> +
  <code>Contract.address</code> (concatenated as byte arrays), for the other three
  operations the <a href="#delegation-signature">signature</a> should be over <code>owner address</code> + <code>name_hash</code> +
  <code>Contract.address</code> using the private key of the <code>owner</code> account for signing.</li>
</ul>
<h4 id="events">Events</h4>
<p>Sophia contracts log structured messages to an event log in the resulting
blockchain transaction. The event log is quite similar to <a href="https://solidity.readthedocs.io/en/v0.4.24/contracts.html#events">Events in
Solidity</a>. To
use events a contract must declare a datatype <code>event</code>, and events are then
logged using the <code>Chain.event</code> function:</p>
<pre><code>  datatype event =
      Event1(int, int, string)
    | Event2(string, address)

  Chain.event(e : event) : unit
</code></pre>

<p>The event can have 0-3 <em>indexed</em> fields, and an optional <em>payload</em> field. A
field is indexed if it fits in a 32-byte word, i.e.
- <code>bool</code>
- <code>int</code>
- <code>bits</code>
- <code>address</code>
- <code>oracle(_, _)</code>
- <code>oracle_query(_, _)</code>
- contract types
- <code>bytes(n)</code> for <code>n</code> ≤ 32, in particular <code>hash</code></p>
<p>The payload field must be either a string or a byte array of more than 32 bytes.
The fields can appear in any order.</p>
<p><em>NOTE:</em> Indexing is not part of the core aeternity node.</p>
<p>Events are further discussed in <a href="../sophia_explained/#events">Sophia explained -
Events</a>.</p>
<h4 id="contract-primitives">Contract primitives</h4>
<p>The block-chain environment available to a contract is defined in three name spaces
<code>Contract</code>, <code>Call</code>, and <code>Chain</code>:</p>
<ul>
<li><code>Contract.creator</code> is the address of the entity that signed the contract creation
  transaction. (Available from Fortuna release.)</li>
<li><code>Contract.address</code> is the address of the contract account.</li>
<li><code>Contract.balance</code> is the amount of coins currently in the contract account.
  Equivalent to <code>Chain.balance(Contract.address)</code>.</li>
<li><code>Call.origin</code> is the address of the account that signed the call transaction that led to this call.</li>
<li><code>Call.caller</code> is the address of the entity (possibly another contract)
  calling the contract.</li>
<li><code>Call.value</code> is the amount of coins transferred to the contract in the call.</li>
<li><code>Call.gas_price</code> is the gas price of the current call.</li>
<li><code>Call.gas_left()</code> is the amount of gas left for the current call.</li>
<li><code>Chain.balance(a : address)</code> returns the balance of account <code>a</code>.</li>
<li><code>Chain.block_hash(h)</code> returns the hash of the block at height <code>h</code>.</li>
<li><code>Chain.block_height</code> is the height of the current block (i.e. the block in which the current call will be included).</li>
<li><code>Chain.coinbase</code> is the address of the account that mined the current block.</li>
<li><code>Chain.timestamp</code> is the timestamp of the current block.</li>
<li><code>Chain.difficulty</code> is the difficulty of the current block.</li>
<li><code>Chain.gas_limit</code> is the gas limit of the current block.</li>
</ul>
<h3 id="compiler-pragmas">Compiler pragmas</h3>
<p>To enforce that a contract is only compiled with specific versions of the
Sophia compiler, you can give one or more <code>@compiler</code> pragmas at the
top-level (typically at the beginning) of a file. For instance, to enforce that
a contract is compiled with version 4.3 of the compiler you write</p>
<pre><code>@compiler &gt;= 4.3
@compiler &lt;  4.4
</code></pre>

<p>Valid operators in compiler pragmas are <code>&lt;</code>, <code>=&lt;</code>, <code>==</code>, <code>&gt;=</code>, and <code>&gt;</code>. Version
numbers are given as a sequence of non-negative integers separated by dots.
Trailing zeros are ignored, so <code>4.0.0 == 4</code>. If a constraint is violated an
error is reported and compilation fails.</p>
<h3 id="standard-library">Standard library</h3>
<p>Sophia provides standard library which is defined in terms of the language. Modules may be included manually just like all other files.</p>
<p>Currently defined library consist of
 - <code>List.aes</code> – operations on lists
 - <code>Func.aes</code> – collection of function combinators
 - <code>Option.aes</code> – operations on <code>option</code>-like types. It forces <code>List.aes</code> to be included
 - <code>Pair.aes</code> – operations on 2-tuples
 - <code>Triple.aes</code> – operations on 3-tuples</p>
<p>The detailed docs may be found <a href="../sophia_stdlib/">here</a></p>
<h3 id="exceptions">Exceptions</h3>
<p>Contracts can fail with an (uncatchable) exception using the built-in function</p>
<pre><code>abort(reason : string) : 'a
</code></pre>

<p>Calling abort causes the top-level call transaction to return an error result
containing the <code>reason</code> string. Only the gas used up to and including the abort
call is charged. This is different from termination due to a crash which
consumes all available gas.</p>
<p>For convenience the following function is also built-in:</p>
<pre><code>function require(b : bool, err : string) =
    if(!b) abort(err)
</code></pre>

<h2 id="syntax">Syntax</h2>
<h3 id="lexical-syntax">Lexical syntax</h3>
<h4 id="comments">Comments</h4>
<p>Single line comments start with <code>//</code> and block comments are enclosed in <code>/*</code>
and <code>*/</code> and can be nested.</p>
<h4 id="keywords">Keywords</h4>
<pre><code>contract elif else entrypoint false function if import include let mod namespace
private payable stateful switch true type record datatype
</code></pre>

<h4 id="tokens">Tokens</h4>
<ul>
<li><code>Id = [a-z_][A-Za-z0-9_']*</code> identifiers start with a lower case letter.</li>
<li><code>Con = [A-Z][A-Za-z0-9_']*</code> constructors start with an upper case letter.</li>
<li><code>QId = (Con\.)+Id</code> qualified identifiers (e.g. <code>Map.member</code>)</li>
<li><code>QCon = (Con\.)+Con</code> qualified constructor</li>
<li><code>TVar = 'Id</code> type variable (e.g <code>'a</code>, <code>'b</code>)</li>
<li><code>Int = [0-9]+(_[0-9]+)*|0x[0-9A-Fa-f]+(_[0-9A-Fa-f]+)*</code> integer literal with optional <code>_</code> separators</li>
<li><code>Bytes = #[0-9A-Fa-f]+(_[0-9A-Fa-f]+)*</code> byte array literal with optional <code>_</code> separators</li>
<li><code>String</code> string literal enclosed in <code>"</code> with escape character <code>\</code></li>
<li><code>Char</code> character literal enclosed in <code>'</code> with escape character <code>\</code></li>
<li><code>AccountAddress</code> base58-encoded 32 byte account pubkey with <code>ak_</code> prefix</li>
<li><code>ContractAddress</code> base58-encoded 32 byte contract address with <code>ct_</code> prefix</li>
<li><code>OracleAddress</code> base58-encoded 32 byte oracle address with <code>ok_</code> prefix</li>
<li><code>OracleQueryId</code> base58-encoded 32 byte oracle query id with <code>oq_</code> prefix</li>
</ul>
<p>Valid string escape codes are</p>
<table>
<thead>
<tr>
<th>Escape</th>
<th align="right">ASCII</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>\b</code></td>
<td align="right">8</td>
</tr>
<tr>
<td><code>\t</code></td>
<td align="right">9</td>
</tr>
<tr>
<td><code>\n</code></td>
<td align="right">10</td>
</tr>
<tr>
<td><code>\v</code></td>
<td align="right">11</td>
</tr>
<tr>
<td><code>\f</code></td>
<td align="right">12</td>
</tr>
<tr>
<td><code>\r</code></td>
<td align="right">13</td>
</tr>
<tr>
<td><code>\e</code></td>
<td align="right">27</td>
</tr>
<tr>
<td><code>\xHexDigits</code></td>
<td align="right"><em>HexDigits</em></td>
</tr>
<tr>
<td>-------------------</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<p>See the <a href="/node/api/api_encoding.md">identifier encoding scheme</a> for the
details on the base58 literals.</p>
<h3 id="layout-blocks">Layout blocks</h3>
<p>Sophia uses Python-style layout rules to group declarations and statements. A
layout block with more than one element must start on a separate line and be
indented more than the currently enclosing layout block. Blocks with a single
element can be written on the same line as the previous token.</p>
<p>Each element of the block must share the same indentation and no part of an
element may be indented less than the indentation of the block. For instance</p>
<pre><code>contract Layout =
  function foo() = 0  // no layout
  function bar() =    // layout block starts on next line
    let x = foo()     // indented more than 2 spaces
    x
     + 1              // the '+' is indented more than the 'x'
</code></pre>

<h3 id="notation">Notation</h3>
<p>In describing the syntax below, we use the following conventions:
- Upper-case identifiers denote non-terminals (like <code>Expr</code>) or terminals with
  some associated value (like <code>Id</code>).
- Keywords and symbols are enclosed in single quotes: <code>'let'</code> or <code>'='</code>.
- Choices are separated by vertical bars: <code>|</code>.
- Optional elements are enclosed in <code>[</code> square brackets <code>]</code>.
- <code>(</code> Parentheses <code>)</code> are used for grouping.
- Zero or more repetitions are denoted by a postfix <code>*</code>, and one or more
  repetitions by a <code>+</code>.
- <code>Block(X)</code> denotes a layout block of <code>X</code>s.
- <code>Sep(X, S)</code> is short for <code>[X (S X)*]</code>, i.e. a possibly empty sequence of <code>X</code>s
  separated by <code>S</code>s.
- <code>Sep1(X, S)</code> is short for <code>X (S X)*</code>, i.e. same as <code>Sep</code>, but must not be empty.</p>
<h3 id="declarations">Declarations</h3>
<p>A Sophia file consists of a sequence of <em>declarations</em> in a layout block.</p>
<pre><code class="c">File ::= Block(Decl)
Decl ::= ['payable'] 'contract' Con '=' Block(Decl)
       | 'namespace' Con '=' Block(Decl)
       | '@compiler' PragmaOp Version
       | 'include' String
       | 'type'     Id ['(' TVar* ')'] ['=' TypeAlias]
       | 'record'   Id ['(' TVar* ')'] '=' RecordType
       | 'datatype' Id ['(' TVar* ')'] '=' DataType
       | EModifier* ('entrypoint' | 'function') Block(FunDecl)

FunDecl ::= Id ':' Type                             // Type signature
          | Id Args [':' Type] '=' Block(Stmt)      // Definition

PragmaOp ::= '&lt;' | '=&lt;' | '==' | '&gt;=' | '&gt;'
Version  ::= Sep1(Int, '.')

EModifier ::= 'payable' | 'stateful'
FModifier ::= 'stateful' | 'private'

Args ::= '(' Sep(Pattern, ',') ')'
</code></pre>

<p>Contract declarations must appear at the top-level.</p>
<p>For example,</p>
<pre><code>contract Test =
  type t = int
  entrypoint add (x : t, y : t) = x + y
</code></pre>

<p>There are three forms of type declarations: type aliases (declared with the
<code>type</code> keyword), record type definitions (<code>record</code>) and data type definitions
(<code>datatype</code>):</p>
<pre><code class="c">TypeAlias  ::= Type
RecordType ::= '{' Sep(FieldType, ',') '}'
DataType   ::= Sep1(ConDecl, '|')

FieldType  ::= Id ':' Type
ConDecl    ::= Con ['(' Sep1(Type, ',') ')']
</code></pre>

<p>For example,</p>
<pre><code>record   point('a) = {x : 'a, y : 'a}
datatype shape('a) = Circle(point('a), 'a) | Rect(point('a), point('a))
type     int_shape = shape(int)
</code></pre>

<h3 id="types_1">Types</h3>
<pre><code class="c">Type ::= Domain '=&gt;' Type             // Function type
       | Type '(' Sep(Type, ',') ')'  // Type application
       | '(' Type ')'                 // Parens
       | 'unit' | Sep(Type, '*')      // Tuples
       | Id | QId | TVar

Domain ::= Type                       // Single argument
         | '(' Sep(Type, ',') ')'     // Multiple arguments
</code></pre>

<p>The function type arrow associates to the right.</p>
<p>Example,</p>
<pre><code>'a =&gt; list('a) =&gt; (int * list('a))
</code></pre>

<h3 id="statements">Statements</h3>
<p>Function bodies are blocks of <em>statements</em>, where a statement is one of the following</p>
<pre><code class="c">Stmt ::= 'switch' '(' Expr ')' Block(Case)
       | 'if' '(' Expr ')' Block(Stmt)
       | 'elif' '(' Expr ')' Block(Stmt)
       | 'else' Block(Stmt)
       | 'let' LetDef
       | Expr

LetDef ::= Id Args [':' Type] '=' Block(Stmt)   // Function definition
         | Pattern '=' Block(Stmt)              // Value definition

Case    ::= Pattern '=&gt;' Block(Stmt)
Pattern ::= Expr
</code></pre>

<p><code>if</code> statements can be followed by zero or more <code>elif</code> statements and an optional final <code>else</code> statement. For example,</p>
<pre><code>let x : int = 4
switch(f(x))
  None =&gt; 0
  Some(y) =&gt;
    if(y &gt; 10)
      &quot;too big&quot;
    elif(y &lt; 3)
      &quot;too small&quot;
    else
      &quot;just right&quot;
</code></pre>

<h3 id="expressions">Expressions</h3>
<pre><code class="c">Expr ::= '(' LamArgs ')' '=&gt;' Block(Stmt)   // Anonymous function    (x) =&gt; x + 1
       | 'if' '(' Expr ')' Expr 'else' Expr // If expression         if(x &lt; y) y else x
       | Expr ':' Type                      // Type annotation       5 : int
       | Expr BinOp Expr                    // Binary operator       x + y
       | UnOp Expr                          // Unary operator        ! b
       | Expr '(' Sep(Expr, ',') ')'        // Application           f(x, y)
       | Expr '.' Id                        // Projection            state.x
       | Expr '[' Expr ']'                  // Map lookup            map[key]
       | Expr '{' Sep(FieldUpdate, ',') '}' // Record or map update  r{ fld[key].x = y }
       | '[' Sep(Expr, ',') ']'             // List                  [1, 2, 3]
       | '[' Expr '|' Sep(Generator, ',') ']'
                                            // List comprehension    [k | x &lt;- [1], if (f(x)), let k = x+1]
       | '{' Sep(FieldUpdate, ',') '}'      // Record or map value   {x = 0, y = 1}, {[key] = val}
       | '(' Expr ')'                       // Parens                (1 + 2) * 3
       | Id | Con | QId | QCon              // Identifiers           x, None, Map.member, AELib.Token
       | Int | Bytes | String | Char        // Literals              123, 0xff, #00abc123, &quot;foo&quot;, '%'
       | AccountAddress | ContractAddress   // Chain identifiers
       | OracleAddress | OracleQueryId      // Chain identifiers

Generator ::= Pattern '&lt;-' Expr   // Generator
            | 'if' '(' Expr ')'   // Guard
            | LetDef              // Definition

LamArgs ::= '(' Sep(LamArg, ',') ')'
LamArg  ::= Id [':' Type]

FieldUpdate ::= Path '=' Expr
Path ::= Id                 // Record field
       | '[' Expr ']'       // Map key
       | Path '.' Id        // Nested record field
       | Path '[' Expr ']'  // Nested map key

BinOp ::= '||' | '&amp;&amp;' | '&lt;' | '&gt;' | '=&lt;' | '&gt;=' | '==' | '!='
        | '::' | '++' | '+' | '-' | '*' | '/' | 'mod' | '^'
UnOp  ::= '-' | '!'
</code></pre>

<h3 id="operators-types">Operators types</h3>
<table>
<thead>
<tr>
<th>Operators</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-</code> <code>+</code> <code>*</code> <code>/</code> <code>mod</code> <code>^</code></td>
<td>arithmetic operators</td>
</tr>
<tr>
<td><code>!</code> <code>&amp;&amp;</code> <code>\|\|</code></td>
<td>logical operators</td>
</tr>
<tr>
<td><code>==</code> <code>!=</code> <code>&lt;</code> <code>&gt;</code> <code>=&lt;</code> <code>&gt;=</code></td>
<td>comparison operators</td>
</tr>
<tr>
<td><code>::</code> <code>++</code></td>
<td>list operators</td>
</tr>
</tbody>
</table>
<h3 id="operator-precendences">Operator precendences</h3>
<p>In order of highest to lowest precedence.</p>
<table>
<thead>
<tr>
<th>Operators</th>
<th>Associativity</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>!</code></td>
<td>right</td>
</tr>
<tr>
<td><code>^</code></td>
<td>left</td>
</tr>
<tr>
<td><code>*</code> <code>/</code> <code>mod</code></td>
<td>left</td>
</tr>
<tr>
<td><code>-</code> (unary)</td>
<td>right</td>
</tr>
<tr>
<td><code>+</code> <code>-</code></td>
<td>left</td>
</tr>
<tr>
<td><code>::</code> <code>++</code></td>
<td>right</td>
</tr>
<tr>
<td><code>&lt;</code> <code>&gt;</code> <code>=&lt;</code> <code>&gt;=</code> <code>==</code> <code>!=</code></td>
<td>none</td>
</tr>
<tr>
<td><code>&amp;&amp;</code></td>
<td>right</td>
</tr>
<tr>
<td><code>\|\|</code></td>
<td>right</td>
</tr>
</tbody>
</table>
<h2 id="examples">Examples</h2>
<pre><code>/*
 * A simple crowd-funding example
 */
contract FundMe =

  record spend_args = { recipient : address,
                        amount    : int }

  record state = { contributions : map(address, int),
                   total         : int,
                   beneficiary   : address,
                   deadline      : int,
                   goal          : int }

  function spend(args : spend_args) =
    raw_spend(args.recipient, args.amount)

  entrypoint init(beneficiary, deadline, goal) : state =
    { contributions = {},
      beneficiary   = beneficiary,
      deadline      = deadline,
      total         = 0,
      goal          = goal }

  function is_contributor(addr) =
    Map.member(addr, state.contributions)

  stateful entrypoint contribute() =
    if(Chain.block_height &gt;= state.deadline)
      spend({ recipient = Call.caller, amount = Call.value }) // Refund money
      false
    else
      let amount =
        switch(Map.lookup(Call.caller, state.contributions))
          None    =&gt; Call.value
          Some(n) =&gt; n + Call.value
      put(state{ contributions[Call.caller] = amount,
                 total @ tot = tot + Call.value })
      true

  stateful entrypoint withdraw() =
    if(Chain.block_height &lt; state.deadline)
      abort(&quot;Cannot withdraw before deadline&quot;)
    if(Call.caller == state.beneficiary)
      withdraw_beneficiary()
    elif(is_contributor(Call.caller))
      withdraw_contributor()
    else
      abort(&quot;Not a contributor or beneficiary&quot;)

  stateful function withdraw_beneficiary() =
    require(state.total &gt;= state.goal, &quot;Project was not funded&quot;)
    spend({recipient = state.beneficiary,
           amount    = Contract.balance })
    put(state{ beneficiary = #0 })

  stateful function withdraw_contributor() =
    if(state.total &gt;= state.goal)
      abort(&quot;Project was funded&quot;)
    let to = Call.caller
    spend({recipient = to,
           amount    = state.contributions[to]})
    put(state{ contributions @ c = Map.delete(to, c) })
</code></pre>

<h2 id="the-lifetime-of-a-contract">The lifetime of a contract</h2>
<h3 id="killing-a-contract">Killing a contract</h3>
<p>There is no selfdestruct instruction in the aevm as in the Ethereum
Virtual Machine instead there is a disable transaction which the
creator of a contract can issue. When a contract is disabled no new
contract can call the old contract.</p>
<p>When a contract is posted to the chain all references to other
contracts are checked and a reference counter in each contract is
increased. You can only post a contract to the chain if all the
contracts referred to are enabled.</p>
<p>When a contract is disabled all other contracts it refer to get their
reference count decreased.</p>
<p>If a contract is disabled and its reference count is zero a miner can
choose to garbage collect the contract.</p>
<p>The reference count of a contract is handled as the account balance
and kept in the state tree of the miner and the merkle hash is
included in the state hash in each block just as with balances.</p>
<p>The transaction for creating a contract has an extra fee called
deposit which has to be an even number. The disable transaction is
free but the miner and the creator get half of the deposit fee each at
contract disable thus encouraging creators to disable their contracts
and miners to pick disable transactions.</p>
<h2 id="the-sophia_01-abi">The Sophia_01 ABI</h2>
<h3 id="byte-code">Byte code</h3>
<p>The byte code contains meta data about the original sophia source
code.</p>
<h4 id="meta-data">Meta data</h4>
<p>The byte code contains meta data for the contract.
- source_code_hash - a Blake2b hash of the source code string of the contract
- type_info - see Type information below
- byte_code - the actual byte code</p>
<p>The layout of the encoding can be found
<a href="../../serializations/#sophia-byte-code">here</a>. The encoding is tagged
with the compiler version.</p>
<h4 id="type-information">Type information</h4>
<p>The type information of each function is encoded in the meta data. The function
hash depends both on the function name and the type signature of the function.
The function hash is also the identifier of a function when calling a contract.
In this way, the function prototype in the calling function gets some level of
type verification.</p>
<p>The type information contains:
- fun_hash - A Blake2b hash of the function name and the function types
- fun_name - The function name as a string
- arg_type - The vm encoded typerep of the argument (as a tuple) of the function
- out_type - The vm encoded typerep of the return type of the function</p>
<h3 id="memory-layout">Memory layout</h3>
<p>Sophia values are 256-bit words. In case of unboxed types (<code>int</code>,
<code>address</code>, and <code>bool</code>) this is simply the value. For boxed types
such as tuples and (non-empty) lists, the word is a pointer into the heap
(memory).</p>
<p>More precisely</p>
<ul>
<li>
<p>Unboxed types are represented as a single big endian 256-bit (32 bytes) word.
  Booleans are represented as 0 for <code>false</code> and 1 for <code>true</code>. The empty list is
  represented as an unboxed -1. In memory maps are represented by an unboxed
  unique identifier. The contents of the map is stored separately in the VM
  state.</p>
</li>
<li>
<p>Boxed types are represented as a 256-bit pointer to a contiguous sequence of
  words, called a <em>heap object</em>, on the heap.</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>Value/Type</th>
<th>Heap object</th>
</tr>
</thead>
<tbody>
<tr>
<td>Tuple</td>
<td>The value of each component in left-to-right order.</td>
</tr>
<tr>
<td>String</td>
<td>The length (number of bytes), followed by as many words as required to store the character data, padded on the right with 0.</td>
</tr>
</tbody>
</table>
<p>The following types are represented in terms of other types:</p>
<p><table>
  <tr><th>Type</th><th>Representation</th></tr>
  <tr><td>Non-empty list</td><td>A pair of the head and the tail.</td></tr>
  <tr><td>Record</td><td>A tuple of the field values.</td></tr>
  <tr><td>Data type</td>
      <td>A tuple where the first component is a constructor
          tag (starting with 0 for the first constructor), and the following
          components are the constructor arguments. For instance, for<br/><br/>
          <tt>datatype zeroOrTwo = Zero | Two(int, int)</tt><br/><br/>
          <tt>Zero</tt> is encoded as a singleton tuple <tt>(0)</tt> and
          <tt>Two(a, b)</tt> as the triple <tt>(1, a, b)</tt>.
      </td></tr>
  <tr><td>Signature</td><td>A pair of two 256-bit words.</td></tr>
  <tr><td>Option types</td><td><tt>datatype option('a) = None | Some('a)</tt>.</td></tr>
  <tr><td><tt>ttl</tt></td><td><tt>datatype ttl = RelativeTTL(int) | FixedTTL(int)</tt></td></tr>
  <tr><td>Type representations</td>
      <td>
      When types need to be encoded as data, they are represented as the following datatype<br/><br/>
      <div>
      <pre>
        datatype typerep = Word  // any unboxed type
                         | String
                         | List(typerep)
                         | Tuple(list(typerep))
                         | Datatype(list(list(typerep)))
                         | TypeRep
                         | Map(typerep, typerep)
      </pre></div>
      The argument to the <tt>Datatype</tt> constructor is the list of type
      representations of the constructor arguments.
      </td></tr>
  </table></p>
<h3 id="encoding-sophia-values-as-binaries">Encoding Sophia values as binaries</h3>
<p>When communicating Sophia values between a contract and the outside world they
are encoded as a binary containing a heap whose first word is the encoded value
(except in the case of maps, see below). For example, the value <code>("main", (1, 2, 3))</code>
can be encoded as</p>
<pre><code>Word       0       1       2       3       4       5       6       7
Addr    0x00    0x20    0x40    0x60    0x80    0xA0    0xC0    0xE0
Value   0x20    0x60    0xA0       4   &quot;main&quot;      1       2       3
</code></pre>

<p>where <code>"main"</code> is the 32 byte word obtained by right padding the string
<code>"main"</code> with zeroes.</p>
<p>Note that the order of the heap objects on the heap is unspecified. Another
valid encoding of the same value is</p>
<pre><code>Word       0       1       2       3       4       5       6       7
Addr    0x00    0x20    0x40    0x60    0x80    0xA0    0xC0    0xE0
Value   0x60       4   &quot;main&quot;   0x20    0xA0       1       2       3
</code></pre>

<p>A canonical binary representation is obtained by storing heap objects in
depth-first left-to-right order (as in the first example). This is the
representation used in map keys.</p>
<h4 id="binary-encoding-of-sophia-maps">Binary encoding of Sophia maps</h4>
<p>In memory, maps are represented by their unique identifier, but in binary
encodings the identifier is replaced by a boxed representation with a heap
object of the shape</p>
<pre><code>    MapSize (N)
    KeySize1
  +----------+
  |   Key1   |
  +----------+
    ValSize1
  +----------+
  |   Val1   |
  +----------+
      ...
    KeySizeN
  +----------+
  |   KeyN   |
  +----------+
    ValSizeN
  +----------+
  |   ValN   |
  +----------+
</code></pre>

<p>The keys and values are encoded as standalone binaries, so the addresses in
<code>KeyI</code> (say) are relative only to the <code>KeyI</code> binary.</p>
<h3 id="initialization">Initialization</h3>
<p>When a Sophia contract is called the calldata should be a pair of a function
hash and a tuple of arguments, encoded as a binary as described above
The value should be a pair of a function hash and a tuple of arguments
For instance, to call the function <code>foo</code> (assuming the function
hash 12345) with arguments <code>1</code> and <code>"bar"</code>, the calldata should be
(the binary encoding of)</p>
<pre><code>  (12345, (1, &quot;bar&quot;))
</code></pre>

<p>Before the contract starts executing the first word of the encoded calldata
(i.e. the calldata value) is pushed on the stack and the rest of the calldata
heap is written to memory. The result is that the Sophia contract starts with
the value of the calldata on top of the stack.</p>
<p>If the contract state has been initialized it is stored on the heap and a
pointer to it is written to address 0. If the contract state has not been
initialized, for instance, when running the <code>init</code> function, 0 is written to
address 0. Note that address 0 contains a <em>pointer</em> to the value of the state,
not the value itself.</p>
<p>The compiler is responsible for generating the appropriate dispatch code,
looking at the calldata and calling the correct function.</p>
<h3 id="return">Return</h3>
<p>When returning from a contract call (using the <code>RETURN</code> instruction) the
type information from the meta data is used to encode the return value.
The VM reads the return value from the heap and returns it to the caller,
and reads the updated contract state using the state pointer at address 0.
A contract can write 0 to the state pointer to indicate that the state
did not change.</p>
<h3 id="storing-the-contract-state">Storing the contract state</h3>
<p>The contract state is stored in the <em>store</em> as a binary heap whose first word
is the value (with maps stored as their identifiers) under key <code>0x00</code>.
The type of the state is stored as an encoded type representation under key
<code>0x01</code> (<strong><em>subject to change: contract state type to be stored in contract
metadata</em></strong>). The list of maps in the contract state is stored under key <code>0x02</code>
as a sequence of 256-bit map identifiers. For each map there are mappings
(where <code>[X]</code> denotes a single 256-bit word):</p>
<pre><code>  [MapId]      =&gt; [RealId] [RefCount] [Size] Types
  [RealId] Key =&gt; Val
</code></pre>

<p><code>Types</code> is the binary encoding of the tuple <code>(KeyType, ValType)</code> of type
representations for the key and value types of the map. <code>Key</code> and <code>Val</code> are
stand-alone heap encodings with map identifiers for maps (although for keys
there are no maps). The <code>RealId</code> field is an indirection to allow in-place
updates of maps and the <code>RefCount</code> field is used to track the number of
occurrences of a map in other maps for the purpose of garbage collection.</p>
<p>The <code>init</code> function of a contract should return a pair of the state type
representation and the initial state, which are written to the store by the VM.
Note that the Sophia code for <code>init</code> only returns the initial state value--the
compiler is responsible for adding the type representation.</p>
<h3 id="remote-contract-calls">Remote contract calls</h3>
<p>The <code>CALL</code> instruction for calling another contract works differently for
Sophia contracts than in the EVM. It expects on the stack (top to bottom):
- <code>Gas</code> - the amount of gas to allocate to the call
- <code>Address</code> - the address of the contract to call (or 0 for primops)
- <code>Amount</code> - the amount of tokens to transfer with the call
- <code>Calldata</code> - the calldata value (pair of function hash and arguments)
- <code>TypeHash</code> - the function hash of primops that have dynamic types
               (e.g., oracles). Otherwise unused.
- <code>_</code> - unused (offset to write return value in the EVM)
- <code>_</code> - unused (return value size in the EVM)</p>
<p>The calldata is read from the heap guided by the calldata type and passed to
the called contract. Before the call is made gas is charged for the size of the
expanded calldata (e.g. maps have to be made explicit when passed between
contracts). When the call returns the return value is pushed on top of the
stack, and potential heap objects for the return value written to the top of
the heap. The return type from the contracts meta data is used when writing it
 to the heap. Since maps are handled outside the heap, the caller explicitly
pays gas for handling maps in the return value.</p>
<h3 id="delegation-signature">Delegation signature</h3>
<p>Some chain operations (<code>Oracle.&lt;operation&gt;</code> and <code>AENS.&lt;operation&gt;</code>) has an optional
delegation signature. This is typically used when a user/accounts would like to
allow a contract to act on it's behalf. The exact data to be signed varies for the
different operations, but in <em>all</em> cases you should prepend the signature data with
the <code>network_id</code> (<code>ae_mainnet</code> for the Aeternity mainnet, etc.).</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../solidity/" title="The Solidity Language" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                The Solidity Language
              </div>
            </div>
          </a>
        
        
          <a href="../sophia_explained/" title="Sophia Explained" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Sophia Explained
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/vendor.3636a4ec.min.js"></script>
      <script src="../../../assets/javascripts/bundle.e9fe3281.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../../..",
          features: [],
          search: Object.assign({
            worker: "../../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>